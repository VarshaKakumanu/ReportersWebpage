import{e as Ji}from"./namespace-emitter-DXTcW28R.js";import{n as Ht}from"./nanoid-DKwX7yNB.js";import{t as Zi,d as es}from"./lodash-BTBRTN8k.js";import{p as ve}from"./@transloadit-9E5jGfYO.js";import{m as ts}from"./mime-match-CT5f1812.js";import{d as is,U as ss}from"./tus-js-client-8dtkok-V.js";import{D as Zt,g as a,x as Ke,b as ns,H as fe,G as wi,T as rs,k as Qe,A as nt,h as at,q as os,y as Lt}from"./preact-wC7rD2Ck.js";import{c as V}from"./classnames-DG1rdC-j.js";import{y as as}from"./exifr-BT1Zfy5V.js";import{m as ei}from"./memoize-one-BdPwpGay.js";import{s as ls}from"./shallow-equal-BQUY1Bas.js";function Je(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var ds=0;function Pi(t){return"__private_"+ds+++"_"+t}function us(t,e,i){const s=[];return t.forEach(n=>typeof n!="string"?s.push(n):e[Symbol.split](n).forEach((o,l,r)=>{o!==""&&s.push(o),l<r.length-1&&s.push(i)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function ti(t,e){const i=/\$/g,s="$$$$";let n=[t];if(e==null)return n;for(const o of Object.keys(e))if(o!=="_"){let l=e[o];typeof l=="string"&&(l=i[Symbol.replace](l,s)),n=us(n,new RegExp(`%\\{${o}\\}`,"g"),l)}return n}const cs=t=>{throw new Error(`missing string: ${t}`)};var Ae=Pi("onMissingKey"),Oe=Pi("apply");class Si{constructor(e,i){let{onMissingKey:s=cs}=i===void 0?{}:i;Object.defineProperty(this,Oe,{value:hs}),Object.defineProperty(this,Ae,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(e)?e.forEach(Je(this,Oe)[Oe],this):Je(this,Oe)[Oe](e),Je(this,Ae)[Ae]=s}translate(e,i){return this.translateArray(e,i).join("")}translateArray(e,i){let s=this.locale.strings[e];if(s==null&&(Je(this,Ae)[Ae](e),s=e),typeof s=="object"){if(i&&typeof i.smart_count<"u"){const o=this.locale.pluralize(i.smart_count);return ti(s[o],i)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return ti(s,i)}}function hs(t){if(!(t!=null&&t.strings))return;const e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...t.strings},pluralize:t.pluralize||e.pluralize})}function rt(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var ps=0;function Ti(t){return"__private_"+ps+++"_"+t}const fs={version:"4.1.2"};var me=Ti("callbacks"),ht=Ti("publish");class Ci{constructor(){Object.defineProperty(this,ht,{value:ms}),this.state={},Object.defineProperty(this,me,{writable:!0,value:new Set})}getState(){return this.state}setState(e){const i={...this.state},s={...this.state,...e};this.state=s,rt(this,ht)[ht](i,s,e)}subscribe(e){return rt(this,me)[me].add(e),()=>{rt(this,me)[me].delete(e)}}}function ms(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];rt(this,me)[me].forEach(s=>{s(...e)})}Ci.VERSION=fs.version;function Ei(t){const e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}const ii={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Ai(t){var e;if(t.type)return t.type;const i=t.name?(e=Ei(t.name).extension)==null?void 0:e.toLowerCase():null;return i&&i in ii?ii[i]:"application/octet-stream"}function gs(t){return t.charCodeAt(0).toString(32)}function si(t){let e="";return t.replace(/[^A-Z0-9]/gi,i=>(e+=`-${gs(i)}`,"/"))+e}function ys(t,e){let i=e||"uppy";return typeof t.name=="string"&&(i+=`-${si(t.name.toLowerCase())}`),t.type!==void 0&&(i+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(i+=`-${si(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(i+=`-${t.data.size}`),t.data.lastModified!==void 0&&(i+=`-${t.data.lastModified}`),i}function vs(t){return!t.isRemote||!t.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(t.remote.provider)}function bs(t,e){if(vs(t))return t.id;const i=Ai(t);return ys({...t,type:i},e)}function Fs(t){if(t==null&&typeof navigator<"u"&&(t=navigator.userAgent),!t)return!0;const e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;const s=e[1].split(".",2),n=parseInt(s[0],10),o=parseInt(s[1],10);return n<15||n===15&&o<15063||n>18||n===18&&o>=18218}function ws(t,e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}function pt(t){return t<10?`0${t}`:t.toString()}function ot(){const t=new Date,e=pt(t.getHours()),i=pt(t.getMinutes()),s=pt(t.getSeconds());return`${e}:${i}:${s}`}const Ps={debug:()=>{},warn:()=>{},error:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.error(`[Uppy] [${ot()}]`,...e)}},Ss={debug:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.debug(`[Uppy] [${ot()}]`,...e)},warn:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.warn(`[Uppy] [${ot()}]`,...e)},error:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.error(`[Uppy] [${ot()}]`,...e)}},Ts={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class H extends Error{constructor(e,i){var s;super(e),this.isRestriction=!0,this.isUserFacing=(s=i==null?void 0:i.isUserFacing)!=null?s:!0,i!=null&&i.file&&(this.file=i.file)}}class Cs{constructor(e,i){this.getI18n=i,this.getOpts=()=>{var s;const n=e();if(((s=n.restrictions)==null?void 0:s.allowedFileTypes)!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(e,i){const{maxTotalFileSize:s,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(l=>!l.isGhost).length+i.length>n)throw new H(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(s){const o=[...e,...i].reduce((l,r)=>{var d;return l+((d=r.size)!=null?d:0)},0);if(o>s)throw new H(this.getI18n()("aggregateExceedsSize",{sizeAllowed:ve(s),size:ve(o)}))}}validateSingleFile(e){const{maxFileSize:i,minFileSize:s,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(r=>r.includes("/")?e.type?ts(e.type.replace(/;.*?$/,""),r):!1:r[0]==="."&&e.extension?e.extension.toLowerCase()===r.slice(1).toLowerCase():!1)){const r=n.join(", ");throw new H(this.getI18n()("youCanOnlyUploadFileTypes",{types:r}),{file:e})}if(i&&e.size!=null&&e.size>i){var o;throw new H(this.getI18n()("exceedsSize",{size:ve(i),file:(o=e.name)!=null?o:this.getI18n()("unnamed")}),{file:e})}if(s&&e.size!=null&&e.size<s)throw new H(this.getI18n()("inferiorSize",{size:ve(s)}),{file:e})}validate(e,i){i.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(e,i)}validateMinNumberOfFiles(e){const{minNumberOfFiles:i}=this.getOpts().restrictions;if(i&&Object.keys(e).length<i)throw new H(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:i}))}getMissingRequiredMetaFields(e){var i;const s=new H(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(i=e.name)!=null?i:this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,o=[];for(const l of n)(!Object.hasOwn(e.meta,l)||e.meta[l]==="")&&o.push(l);return{missingFields:o,error:s}}}const Es={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function p(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var As=0;function E(t){return"__private_"+As+++"_"+t}const Os={version:"4.3.0"},Ze={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var U=E("plugins"),I=E("restricter"),Ue=E("storeUnsubscribe"),Y=E("emitter"),ge=E("preProcessors"),ye=E("uploaders"),ne=E("postProcessors"),z=E("informAndEmit"),Ve=E("checkRequiredMetaFieldsOnFile"),ft=E("checkRequiredMetaFields"),Re=E("assertNewUploadAllowed"),_t=E("transformFile"),De=E("startIfAutoProceed"),Ne=E("checkAndUpdateFileState"),mt=E("addListeners"),G=E("updateOnlineStatus"),Ie=E("requestClientById"),Q=E("createUpload"),gt=E("getUpload"),be=E("removeUpload"),J=E("runUpload");class Wt{constructor(e){Object.defineProperty(this,J,{value:$s}),Object.defineProperty(this,be,{value:ks}),Object.defineProperty(this,gt,{value:_s}),Object.defineProperty(this,Q,{value:Ls}),Object.defineProperty(this,mt,{value:xs}),Object.defineProperty(this,Ne,{value:Ms}),Object.defineProperty(this,De,{value:Bs}),Object.defineProperty(this,_t,{value:Is}),Object.defineProperty(this,Re,{value:Ns}),Object.defineProperty(this,ft,{value:Ds}),Object.defineProperty(this,Ve,{value:Rs}),Object.defineProperty(this,z,{value:Us}),Object.defineProperty(this,U,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,Ue,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:Ji()}),Object.defineProperty(this,ge,{writable:!0,value:new Set}),Object.defineProperty(this,ye,{writable:!0,value:new Set}),Object.defineProperty(this,ne,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=Zi((n,o)=>{const l=this.getFile(n==null?void 0:n.id);if(n==null||!l){this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`);return}if(l.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${n.id}`);return}const r=Number.isFinite(o.bytesTotal)&&o.bytesTotal>0;this.setFileState(n.id,{progress:{...l.progress,bytesUploaded:o.bytesUploaded,bytesTotal:o.bytesTotal,percentage:r?Math.round(o.bytesUploaded/o.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,G,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,Ie,{writable:!0,value:new Map}),this.defaultLocale=Es;const i={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Ts,meta:{},onBeforeFileAdded:(n,o)=>!Object.hasOwn(o,n.id),onBeforeUpload:n=>n,store:new Ci,logger:Ps,infoTimeout:5e3},s={...i,...e};this.opts={...s,restrictions:{...i.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Ss),this.log(`Using Core v${Wt.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Ze,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Fs(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),p(this,I)[I]=new Cs(()=>this.opts,()=>this.i18n),p(this,Ue)[Ue]=this.store.subscribe((n,o,l)=>{this.emit("state-update",n,o,l),this.updateAll(o)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),p(this,mt)[mt]()}emit(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];p(this,Y)[Y].emit(e,...s)}on(e,i){return p(this,Y)[Y].on(e,i),this}once(e,i){return p(this,Y)[Y].once(e,i),this}off(e,i){return p(this,Y)[Y].off(e,i),this}updateAll(e){this.iteratePlugins(i=>{i.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const i=this.getState().files;this.setState({files:{...i,...Object.fromEntries(Object.entries(e).map(s=>{let[n,o]=s;return[n,{...i[n],...o}]}))}})}setFileState(e,i){if(!this.getState().files[e])throw new Error(`Canâ€™t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:i})}i18nInit(){const e=s=>this.log(`Missing i18n string: ${s}`,"error"),i=new Si([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=i.translate.bind(i),this.i18nArray=i.translateArray.bind(i),this.locale=i.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e==null?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(i=>{i.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},i={...this.getState().files},s=Object.create(null);Object.keys(i).forEach(n=>{s[n]={...i[n],progress:{...i[n].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:s,...Ze})}clear(){const{capabilities:e,currentUploads:i}=this.getState();if(Object.keys(i).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Ze,files:{}})}addPreProcessor(e){p(this,ge)[ge].add(e)}removePreProcessor(e){return p(this,ge)[ge].delete(e)}addPostProcessor(e){p(this,ne)[ne].add(e)}removePostProcessor(e){return p(this,ne)[ne].delete(e)}addUploader(e){p(this,ye)[ye].add(e)}removeUploader(e){return p(this,ye)[ye].delete(e)}setMeta(e){const i={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach(n=>{s[n]={...s[n],meta:{...s[n].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:i,files:s})}setFileMeta(e,i){const s={...this.getState().files};if(!s[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const n={...s[e].meta,...i};s[e]={...s[e],meta:n},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(i=>this.getFile(i))}getObjectOfFilesPerState(){const{files:e,totalProgress:i,error:s}=this.getState(),n=Object.values(e),o=[],l=[],r=[],d=[],u=[],c=[],h=[],f=[],g=[];for(const v of n){const{progress:w}=v;!w.uploadComplete&&w.uploadStarted&&(o.push(v),v.isPaused||f.push(v)),w.uploadStarted||l.push(v),(w.uploadStarted||w.preprocess||w.postprocess)&&r.push(v),w.uploadStarted&&d.push(v),v.isPaused&&u.push(v),w.uploadComplete&&c.push(v),v.error&&h.push(v),(w.preprocess||w.postprocess)&&g.push(v)}return{newFiles:l,startedFiles:r,uploadStartedFiles:d,pausedFiles:u,completeFiles:c,erroredFiles:h,inProgressFiles:o,inProgressNotPausedFiles:f,processingFiles:g,isUploadStarted:d.length>0,isAllComplete:i===100&&c.length===n.length&&g.length===0,isAllErrored:!!s&&h.length===n.length,isAllPaused:o.length!==0&&u.length===o.length,isUploadInProgress:o.length>0,isSomeGhost:n.some(v=>v.isGhost)}}validateSingleFile(e){try{p(this,I)[I].validateSingleFile(e)}catch(i){return i.message}return null}validateAggregateRestrictions(e){const i=this.getFiles();try{p(this,I)[I].validateAggregateRestrictions(i,e)}catch(s){return s.message}return null}checkIfFileAlreadyExists(e){const{files:i}=this.getState();return!!(i[e]&&!i[e].isGhost)}addFile(e){p(this,Re)[Re](e);const{nextFilesState:i,validFilesToAdd:s,errors:n}=p(this,Ne)[Ne]([e]),o=n.filter(r=>r.isRestriction);if(p(this,z)[z](o),n.length>0)throw n[0];this.setState({files:i});const[l]=s;return this.emit("file-added",l),this.emit("files-added",s),this.log(`Added file: ${l.name}, ${l.id}, mime type: ${l.type}`),p(this,De)[De](),l.id}addFiles(e){p(this,Re)[Re]();const{nextFilesState:i,validFilesToAdd:s,errors:n}=p(this,Ne)[Ne](e),o=n.filter(r=>r.isRestriction);p(this,z)[z](o);const l=n.filter(r=>!r.isRestriction);if(l.length>0){let r=`Multiple errors occurred while adding files:
`;if(l.forEach(d=>{r+=`
 * ${d.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:l.length}),details:r},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(l,r);{const d=new Error(r);throw d.errors=l,d}}this.setState({files:i}),s.forEach(r=>{this.emit("file-added",r)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(r=>{this.log(`Added file: ${r.name}
 id: ${r.id}
 type: ${r.type}`)}),s.length>0&&p(this,De)[De]()}removeFiles(e){const{files:i,currentUploads:s}=this.getState(),n={...i},o={...s},l=Object.create(null);e.forEach(c=>{i[c]&&(l[c]=i[c],delete n[c])});function r(c){return l[c]===void 0}Object.keys(o).forEach(c=>{const h=s[c].fileIDs.filter(r);if(h.length===0){delete o[c];return}const{capabilities:f}=this.getState();if(h.length!==s[c].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");o[c]={...s[c],fileIDs:h}});const d={currentUploads:o,files:n};Object.keys(n).length===0&&(d.allowNewUpload=!0,d.error=null,d.recoveredState=null),this.setState(d),this.calculateTotalProgress();const u=Object.keys(l);u.forEach(c=>{this.emit("file-removed",l[c])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const i=this.getFile(e),n=!(i.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",i,n),n}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const n={...e[s],isPaused:!0};e[s]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const n={...e[s],isPaused:!1,error:null};e[s]=n}),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},i=Object.keys(e).filter(n=>e[n].error);if(i.forEach(n=>{const o={...e[n],isPaused:!1,error:null};e[n]=o}),this.setState({files:e,error:null}),this.emit("retry-all",Object.values(e)),i.length===0)return Promise.resolve({successful:[],failed:[]});const s=p(this,Q)[Q](i,{forceAllowNewUpload:!0});return p(this,J)[J](s)}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),i=Object.keys(e);i.length&&this.removeFiles(i),this.setState(Ze)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const i=p(this,Q)[Q]([e],{forceAllowNewUpload:!0});return p(this,J)[J](i)}logout(){this.iteratePlugins(e=>{var i;(i=e.provider)==null||i.logout==null||i.logout()})}calculateTotalProgress(){const i=this.getFiles().filter(u=>u.progress.uploadStarted||u.progress.preprocess||u.progress.postprocess);if(i.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const s=i.filter(u=>u.progress.bytesTotal!=null),n=i.filter(u=>u.progress.bytesTotal==null);if(s.length===0){const u=i.length*100,c=n.reduce((f,g)=>f+g.progress.percentage,0),h=Math.round(c/u*100);this.setState({totalProgress:h});return}let o=s.reduce((u,c)=>{var h;return u+((h=c.progress.bytesTotal)!=null?h:0)},0);const l=o/s.length;o+=l*n.length;let r=0;s.forEach(u=>{r+=u.progress.bytesUploaded}),n.forEach(u=>{r+=l*(u.progress.percentage||0)/100});let d=o===0?0:Math.round(r/o*100);d>100&&(d=100),this.setState({totalProgress:d}),this.emit("progress",d)}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){const d=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(d)}for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];const o=new e(this,...s),l=o.id;if(!l)throw new Error("Your plugin must have an id");if(!o.type)throw new Error("Your plugin must have a type");const r=this.getPlugin(l);if(r){const d=`Already found a plugin named '${r.id}'. Tried to use: '${l}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(d)}return e.VERSION&&this.log(`Using ${l} v${e.VERSION}`),o.type in p(this,U)[U]?p(this,U)[U][o.type].push(o):p(this,U)[U][o.type]=[o],o.install(),this.emit("plugin-added",o),this}getPlugin(e){for(const i of Object.values(p(this,U)[U])){const s=i.find(n=>n.id===e);if(s!=null)return s}}[Symbol.for("uppy test: getPlugins")](e){return p(this,U)[U][e]}iteratePlugins(e){Object.values(p(this,U)[U]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const i=p(this,U)[U][e.type],s=i.findIndex(l=>l.id===e.id);s!==-1&&i.splice(s,1);const o={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(o)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),p(this,Ue)[Ue](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",p(this,G)[G]),window.removeEventListener("offline",p(this,G)[G]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,i,s){i===void 0&&(i="info"),s===void 0&&(s=3e3);const n=typeof e=="object";this.setState({info:[...this.getState().info,{type:i,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(e,i){const{logger:s}=this.opts;switch(i){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e);break}}registerRequestClient(e,i){p(this,Ie)[Ie].set(e,i)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const i=p(this,Ie)[Ie].get(e.remote.requestClientId);if(i==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return i}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?p(this,J)[J](e):(p(this,be)[be](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return p(this,Q)[Q](...arguments)}addResultData(e,i){if(!p(this,gt)[gt](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:s}=this.getState(),n={...s[e],result:{...s[e].result,...i}};this.setState({currentUploads:{...s,[e]:n}})}upload(){var e;(e=p(this,U)[U].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:i}=this.getState();const s=this.opts.onBeforeUpload(i);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(i=s,this.setState({files:i})),Promise.resolve().then(()=>p(this,I)[I].validateMinNumberOfFiles(i)).catch(n=>{throw p(this,z)[z]([n]),n}).then(()=>{if(!p(this,ft)[ft](i))throw new H(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(()=>{const{currentUploads:n}=this.getState(),o=Object.values(n).flatMap(d=>d.fileIDs),l=[];Object.keys(i).forEach(d=>{const u=this.getFile(d);!u.progress.uploadStarted&&o.indexOf(d)===-1&&l.push(u.id)});const r=p(this,Q)[Q](l);return p(this,J)[J](r)}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}}function Us(t){for(const o of t)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");const e=t.filter(o=>o.isUserFacing),i=4,s=e.slice(0,i),n=e.slice(i);s.forEach(o=>{let{message:l,details:r=""}=o;this.info({message:l,details:r},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}function Rs(t){const{missingFields:e,error:i}=p(this,I)[I].getMissingRequiredMetaFields(t);return e.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:e}),this.log(i.message),this.emit("restriction-failed",t,i),!1):!0}function Ds(t){let e=!0;for(const i of Object.values(t))p(this,Ve)[Ve](i)||(e=!1);return e}function Ns(t){const{allowNewUpload:e}=this.getState();if(e===!1){const i=new H(this.i18n("noMoreFilesAllowed"),{file:t});throw p(this,z)[z]([i]),i}}function Is(t){const e=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,i=Ai(e),s=ws(i,e),n=Ei(s).extension,o=bs(e,this.getID()),l=e.meta||{};l.name=s,l.type=i;const r=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:o,name:s,extension:n||"",meta:{...this.getState().meta,...l},type:i,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:r,uploadComplete:!1,uploadStarted:null},size:r,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function Bs(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))}function Ms(t){const{files:e}=this.getState(),i={...e},s=[],n=[];for(const r of t)try{var o;let d=p(this,_t)[_t](r);const u=(o=e[d.id])==null?void 0:o.isGhost;u&&(d={...e[d.id],isGhost:!1,data:r.data},this.log(`Replaced the blob in the restored ghost file: ${d.name}, ${d.id}`));const c=this.opts.onBeforeFileAdded(d,i);if(!c&&this.checkIfFileAlreadyExists(d.id)){var l;throw new H(this.i18n("noDuplicates",{fileName:(l=d.name)!=null?l:this.i18n("unnamed")}),{file:r})}if(c===!1&&!u)throw new H("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:r});typeof c=="object"&&c!==null&&(d=c),p(this,I)[I].validateSingleFile(d),i[d.id]=d,s.push(d)}catch(d){n.push(d)}try{p(this,I)[I].validateAggregateRestrictions(Object.values(e),s)}catch(r){return n.push(r),{nextFilesState:e,validFilesToAdd:[],errors:n}}return{nextFilesState:i,validFilesToAdd:s,errors:n}}function xs(){const t=(s,n,o)=>{let l=s.message||"Unknown error";s.details&&(l+=` ${s.details}`),this.setState({error:l}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:l,response:o})};this.on("error",t),this.on("upload-error",(s,n,o)=>{if(t(n,s,o),typeof n=="object"&&n.message){var l;this.log(n.message,"error");const r=new Error(this.i18n("failedToUpload",{file:(l=s==null?void 0:s.name)!=null?l:""}));r.isUserFacing=!0,r.details=n.message,n.details&&(r.details+=` ${n.details}`),p(this,z)[z]([r])}else p(this,z)[z]([n])});let e=null;this.on("upload-stalled",(s,n)=>{const{message:o}=s,l=n.map(r=>r.meta.name).join(", ");e||(this.info({message:o,details:l},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${o} ${l}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const i=s=>{const n=s.filter(l=>{const r=l!=null&&this.getFile(l.id);return r||this.log(`Not setting progress for a file that has been removed: ${l==null?void 0:l.id}`),r}),o=Object.fromEntries(n.map(l=>[l.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:l.size}}]));this.patchFilesState(o)};this.on("upload-start",i),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const o=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...o,postprocess:p(this,ne)[ne].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:n.bytesUploaded||o.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:n}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const n={...this.getState().files};n[s.id]={...n[s.id],progress:{...n[s.id].progress}},delete n[s.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:n}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const n={...this.getState().files};n[s.id]={...n[s.id],progress:{...n[s.id].progress}},delete n[s.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",s=>{s&&p(this,Ve)[Ve](s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",p(this,G)[G]),window.addEventListener("offline",p(this,G)[G]),setTimeout(p(this,G)[G],3e3))}function Ls(t,e){e===void 0&&(e={});const{forceAllowNewUpload:i=!1}=e,{allowNewUpload:s,currentUploads:n}=this.getState();if(!s&&!i)throw new Error("Cannot create a new upload: already uploading.");const o=Ht();return this.emit("upload",o,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[o]:{fileIDs:t,step:0,result:{}}}}),o}function _s(t){const{currentUploads:e}=this.getState();return e[t]}function ks(t){const e={...this.getState().currentUploads};delete e[t],this.setState({currentUploads:e})}async function $s(t){const e=()=>{const{currentUploads:o}=this.getState();return o[t]};let i=e();const s=[...p(this,ge)[ge],...p(this,ye)[ye],...p(this,ne)[ne]];try{for(let o=i.step||0;o<s.length&&i;o++){const l=s[o];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...i,step:o}}});const{fileIDs:r}=i;await l(r,t),i=e()}}catch(o){throw p(this,be)[be](t),o}if(i){i.fileIDs.forEach(d=>{const u=this.getFile(d);u&&u.progress.postprocess&&this.emit("postprocess-complete",u)});const o=i.fileIDs.map(d=>this.getFile(d)),l=o.filter(d=>!d.error),r=o.filter(d=>d.error);this.addResultData(t,{successful:l,failed:r,uploadID:t}),i=e()}let n;return i&&(n=i.result,this.emit("complete",n),p(this,be)[be](t)),n==null&&this.log(`Not setting result for an upload that has been removed: ${t}`),n}Wt.VERSION=Os.version;function Oi(t){return typeof t!="object"||t===null||!("nodeType"in t)?!1:t.nodeType===Node.ELEMENT_NODE}function zs(t,e){return e===void 0&&(e=document),typeof t=="string"?e.querySelector(t):Oi(t)?t:null}function Ui(t){for(var e;t&&!t.dir;)t=t.parentNode;return(e=t)==null?void 0:e.dir}class Ri{constructor(e,i){this.uppy=e,this.opts=i??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return(e==null?void 0:e[this.id])||{}}setPluginState(e){const{plugins:i}=this.uppy.getState();this.uppy.setState({plugins:{...i,[this.id]:{...i[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new Si([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function ni(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var qs=0;function js(t){return"__private_"+qs+++"_"+t}function Hs(t){let e=null,i;return function(){for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return i=n,e||(e=Promise.resolve().then(()=>(e=null,t(...i)))),e}}var Be=js("updateUI");class we extends Ri{constructor(){super(...arguments),Object.defineProperty(this,Be,{writable:!0,value:void 0})}getTargetPlugin(e){let i;if(typeof(e==null?void 0:e.addTarget)=="function")i=e,i instanceof we||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:i,UIPlugin:we}}));else if(typeof e=="function"){const s=e;this.uppy.iteratePlugins(n=>{n instanceof s&&(i=n)})}return i}mount(e,i){const s=i.id,n=zs(e);if(n){this.isTargetDOMEl=!0;const r=document.createElement("div");return r.classList.add("uppy-Root"),ni(this,Be)[Be]=Hs(d=>{this.uppy.getPlugin(this.id)&&(Zt(this.render(d,r),r),this.afterUpdate())}),this.uppy.log(`Installing ${s} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),Zt(this.render(this.uppy.getState(),r),r),this.el=r,n.appendChild(r),r.dir=this.opts.direction||Ui(r)||"ltr",this.onMount(),this.el}const o=this.getTargetPlugin(e);if(o)return this.uppy.log(`Installing ${s} to ${o.id}`),this.parent=o,this.el=o.addTarget(i),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let l=`Invalid target option given to ${s}.`;throw typeof e=="function"?l+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":l+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(l)}render(e,i){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var i,s;(i=(s=ni(this,Be))[Be])==null||i.call(s,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}}function Z(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Ws=0;function Di(t){return"__private_"+Ws+++"_"+t}var D=Di("uppy"),Me=Di("events");class Gs{constructor(e){Object.defineProperty(this,D,{writable:!0,value:void 0}),Object.defineProperty(this,Me,{writable:!0,value:[]}),Z(this,D)[D]=e}on(e,i){return Z(this,Me)[Me].push([e,i]),Z(this,D)[D].on(e,i)}remove(){for(const[e,i]of Z(this,Me)[Me].splice(0))Z(this,D)[D].off(e,i)}onFilePause(e,i){this.on("upload-pause",(s,n)=>{e===(s==null?void 0:s.id)&&i(n)})}onFileRemove(e,i){this.on("file-removed",s=>{e===s.id&&i(s.id)})}onPause(e,i){this.on("upload-pause",(s,n)=>{e===(s==null?void 0:s.id)&&i(n)})}onRetry(e,i){this.on("upload-retry",s=>{e===(s==null?void 0:s.id)&&i()})}onRetryAll(e,i){this.on("retry-all",()=>{Z(this,D)[D].getFile(e)&&i()})}onPauseAll(e,i){this.on("pause-all",()=>{Z(this,D)[D].getFile(e)&&i()})}onCancelAll(e,i){var s=this;this.on("cancel-all",function(){Z(s,D)[D].getFile(e)&&i(...arguments)})}onResumeAll(e,i){this.on("resume-all",()=>{Z(this,D)[D].getFile(e)&&i()})}}class Vs extends Error{constructor(e,i){i===void 0&&(i=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=i}}function Ks(t){return t?t.readyState!==0&&t.readyState!==4||t.status===0:!1}function y(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Xs=0;function x(t){return"__private_"+Xs+++"_"+t}function Ys(t){return new Error("Cancelled",{cause:t})}function ri(t){if(t!=null){var e;const i=()=>this.abort(t.reason);t.addEventListener("abort",i,{once:!0});const s=()=>{t.removeEventListener("abort",i)};(e=this.then)==null||e.call(this,s,s)}return this}var $=x("activeRequests"),B=x("queuedHandlers"),_=x("paused"),le=x("pauseTimer"),N=x("downLimit"),de=x("upperLimit"),ee=x("rateLimitingTimer"),He=x("call"),re=x("queueNext"),kt=x("next"),yt=x("queue"),$t=x("dequeue"),vt=x("resume"),ue=x("increaseLimit");class Qs{constructor(e){Object.defineProperty(this,$t,{value:sn}),Object.defineProperty(this,yt,{value:tn}),Object.defineProperty(this,kt,{value:en}),Object.defineProperty(this,re,{value:Zs}),Object.defineProperty(this,He,{value:Js}),Object.defineProperty(this,$,{writable:!0,value:0}),Object.defineProperty(this,B,{writable:!0,value:[]}),Object.defineProperty(this,_,{writable:!0,value:!1}),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:1}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,ue,{writable:!0,value:()=>{if(y(this,_)[_]){y(this,ee)[ee]=setTimeout(y(this,ue)[ue],0);return}y(this,N)[N]=this.limit,this.limit=Math.ceil((y(this,de)[de]+y(this,N)[N])/2);for(let i=y(this,N)[N];i<=this.limit;i++)y(this,re)[re]();y(this,de)[de]-y(this,N)[N]>3?y(this,ee)[ee]=setTimeout(y(this,ue)[ue],2e3):y(this,N)[N]=Math.floor(y(this,N)[N]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,i){return!y(this,_)[_]&&y(this,$)[$]<this.limit?y(this,He)[He](e):y(this,yt)[yt](e,i)}wrapSyncFunction(e,i){var s=this;return function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];const r=s.run(()=>(e(...o),queueMicrotask(()=>r.done()),()=>{}),i);return{abortOn:ri,abort(){r.abort()}}}}wrapPromiseFunction(e,i){var s=this;return function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];let r;const d=new Promise((u,c)=>{r=s.run(()=>{let h,f;try{f=Promise.resolve(e(...o))}catch(g){f=Promise.reject(g)}return f.then(g=>{h?c(h):(r.done(),u(g))},g=>{h?c(h):(r.done(),c(g))}),g=>{h=Ys(g)}},i)});return d.abort=u=>{r.abort(u)},d.abortOn=ri,d}}resume(){y(this,_)[_]=!1,clearTimeout(y(this,le)[le]);for(let e=0;e<this.limit;e++)y(this,re)[re]()}pause(e){e===void 0&&(e=null),y(this,_)[_]=!0,clearTimeout(y(this,le)[le]),e!=null&&(y(this,le)[le]=setTimeout(y(this,vt)[vt],e))}rateLimit(e){clearTimeout(y(this,ee)[ee]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(y(this,de)[de]=this.limit-1,this.limit=y(this,N)[N],y(this,ee)[ee]=setTimeout(y(this,ue)[ue],e))}get isPaused(){return y(this,_)[_]}}function Js(t){y(this,$)[$]+=1;let e=!1,i;try{i=t()}catch(s){throw y(this,$)[$]-=1,s}return{abort:s=>{e||(e=!0,y(this,$)[$]-=1,i==null||i(s),y(this,re)[re]())},done:()=>{e||(e=!0,y(this,$)[$]-=1,y(this,re)[re]())}}}function Zs(){queueMicrotask(()=>y(this,kt)[kt]())}function en(){if(y(this,_)[_]||y(this,$)[$]>=this.limit||y(this,B)[B].length===0)return;const t=y(this,B)[B].shift();if(t==null)throw new Error("Invariant violation: next is null");const e=y(this,He)[He](t.fn);t.abort=e.abort,t.done=e.done}function tn(t,e){const i={fn:t,priority:(e==null?void 0:e.priority)||0,abort:()=>{y(this,$t)[$t](i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=y(this,B)[B].findIndex(n=>i.priority>n.priority);return s===-1?y(this,B)[B].push(i):y(this,B)[B].splice(s,0,i),i}function sn(t){const e=y(this,B)[B].indexOf(t);e!==-1&&y(this,B)[B].splice(e,1)}function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function nn(t){const e=i=>"error"in i&&!!i.error;return t.filter(i=>!e(i))}function rn(t){return t.filter(e=>{var i;return!((i=e.progress)!=null&&i.uploadStarted)||!e.isRestored})}function on(t,e){return t===!0?Object.keys(e):Array.isArray(t)?t:[]}function an(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function ln(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function dn(t){return(e,i)=>{if(an()||ln())return is.fingerprint(e,i);const s=["tus",t.id,i.endpoint].join("-");return Promise.resolve(s)}}function Fe(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var un=0;function Xe(t){return"__private_"+un+++"_"+t}const cn={version:"4.1.5"},Ni={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},hn={limit:20,retryDelays:Ni.retryDelays,withCredentials:!1,allowedMetaFields:!0};var We=Xe("retryDelayIterator"),zt=Xe("uploadLocalFile"),qt=Xe("getCompanionClientArgs"),Ft=Xe("uploadFiles"),xe=Xe("handleUpload");class pn extends Ri{constructor(e,i){var s,n;if(super(e,{...hn,...i}),Object.defineProperty(this,Ft,{value:gn}),Object.defineProperty(this,qt,{value:mn}),Object.defineProperty(this,zt,{value:fn}),Object.defineProperty(this,We,{writable:!0,value:void 0}),Object.defineProperty(this,xe,{writable:!0,value:async o=>{if(o.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const l=this.uppy.getFilesByIds(o);await Fe(this,Ft)[Ft](l)}}),this.type="uploader",this.id=this.opts.id||"Tus",(i==null?void 0:i.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in i)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=(s=this.opts.rateLimitedQueue)!=null?s:new Qs(this.opts.limit),Fe(this,We)[We]=(n=this.opts.retryDelays)==null?void 0:n.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(e,i){const s=this.uploaders[e];s&&(s.abort(),i!=null&&i.abort&&s.abort(!0),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}onReceiveUploadUrl(e,i){const s=this.uppy.getFile(e.id);s&&(!s.tus||s.tus.uploadUrl!==i)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(s.id,{tus:{...s.tus,uploadUrl:i}}))}install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(Fe(this,xe)[xe])}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(Fe(this,xe)[xe])}}function fn(t){return this.resetUploaderReferences(t.id),new Promise((e,i)=>{let s,n,o;const l={...this.opts,...t.tus||{}};typeof l.headers=="function"&&(l.headers=l.headers(t));const{onShouldRetry:r,onBeforeRequest:d,...u}=l,c={...Ni,...u};c.fingerprint=dn(t),c.onBeforeRequest=async m=>{const b=m.getUnderlyingObject();b.withCredentials=!!l.withCredentials;let F;if(typeof d=="function"&&(F=d(m,t)),bt(s,"shouldBeRequeued")){if(!s.shouldBeRequeued)return Promise.reject();let T;const S=new Promise(q=>{T=q});s=this.requests.run(()=>(t.isPaused&&s.abort(),T(),()=>{})),await Promise.all([S,F]);return}return F},c.onError=m=>{var b;this.uppy.log(m);const F=m.originalRequest!=null?m.originalRequest.getUnderlyingObject():null;Ks(F)&&(m=new Vs(m,F)),this.resetUploaderReferences(t.id),(b=s)==null||b.abort(),typeof l.onError=="function"&&l.onError(m),i(m)},c.onProgress=(m,b)=>{var F;this.onReceiveUploadUrl(t,o.url),typeof l.onProgress=="function"&&l.onProgress(m,b);const T=this.uppy.getFile(t.id);this.uppy.emit("upload-progress",T,{uploadStarted:(F=T.progress.uploadStarted)!=null?F:0,bytesUploaded:m,bytesTotal:b})},c.onSuccess=m=>{var b;const F={uploadURL:(b=o.url)!=null?b:void 0,status:200,body:{xhr:m.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(t.id),F),this.resetUploaderReferences(t.id),s.done(),o.url){const{name:T}=o.file;this.uppy.log(`Download ${T} from ${o.url}`)}typeof l.onSuccess=="function"&&l.onSuccess(m),e(o)};const h=m=>{var b;const F=m==null||(b=m.originalResponse)==null?void 0:b.getStatus();if(F===429){if(!this.requests.isPaused){var T;const S=(T=Fe(this,We)[We])==null?void 0:T.next();if(S==null||S.done)return!1;this.requests.rateLimit(S.value)}}else{if(F!=null&&F>=400&&F<500&&F!==409&&F!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return s.abort(),s={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};r!=null?c.onShouldRetry=(m,b)=>r(m,b,l,h):c.onShouldRetry=h;const f=(m,b,F)=>{bt(m,b)&&!bt(m,F)&&(m[F]=m[b])},g={};on(l.allowedMetaFields,t.meta).forEach(m=>{g[m]=String(t.meta[m])}),f(g,"type","filetype"),f(g,"name","filename"),c.metadata=g,o=new ss(t.data,c),this.uploaders[t.id]=o;const w=new Gs(this.uppy);this.uploaderEvents[t.id]=w,n=()=>(t.isPaused||o.start(),()=>{}),o.findPreviousUploads().then(m=>{const b=m[0];b&&(this.uppy.log(`[Tus] Resuming upload of ${t.id} started at ${b.creationTime}`),o.resumeFromPreviousUpload(b))}),s=this.requests.run(n),w.onFileRemove(t.id,m=>{s.abort(),this.resetUploaderReferences(t.id,{abort:!!o.url}),e(`upload ${m} was removed`)}),w.onPause(t.id,m=>{s.abort(),m?o.abort():s=this.requests.run(n)}),w.onPauseAll(t.id,()=>{s.abort(),o.abort()}),w.onCancelAll(t.id,()=>{s.abort(),this.resetUploaderReferences(t.id,{abort:!!o.url}),e(`upload ${t.id} was canceled`)}),w.onResumeAll(t.id,()=>{s.abort(),t.error&&o.abort(),s=this.requests.run(n)})}).catch(e=>{throw this.uppy.emit("upload-error",t,e),e})}function mn(t){var e;const i={...this.opts};return t.tus&&Object.assign(i,t.tus),typeof i.headers=="function"&&(i.headers=i.headers(t)),{...(e=t.remote)==null?void 0:e.body,endpoint:i.endpoint,uploadUrl:i.uploadUrl,protocol:"tus",size:t.data.size,headers:i.headers,metadata:t.meta}}async function gn(t){const e=nn(t),i=rn(e);this.uppy.emit("upload-start",i),await Promise.allSettled(e.map(s=>{if(s.isRemote){const n=()=>this.requests,o=new AbortController,l=d=>{d.id===s.id&&o.abort()};this.uppy.on("file-removed",l);const r=this.uppy.getRequestClientForFile(s).uploadRemoteFile(s,Fe(this,qt)[qt](s),{signal:o.signal,getQueue:n});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",l)},{priority:-1})(),r}return Fe(this,zt)[zt](s)}))}pn.VERSION=cn.version;function oi(t,e,i,s){return t===e?t:s===0?e:t+(e-t)*2**(-s/i)}const X={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function wt(t){const e=[];let i="indeterminate",s;for(const{progress:o}of Object.values(t)){const{preprocess:l,postprocess:r}=o;s==null&&(l||r)&&({mode:i,message:s}=l||r),(l==null?void 0:l.mode)==="determinate"&&e.push(l.value),(r==null?void 0:r.mode)==="determinate"&&e.push(r.value)}const n=e.reduce((o,l)=>o+l/e.length,0);return{mode:i,message:s,value:n}}function yn(t){const e=Math.floor(t/3600)%24,i=Math.floor(t/60)%60,s=Math.floor(t%60);return{hours:e,minutes:i,seconds:s}}function vn(t){const e=yn(t),i=e.hours===0?"":`${e.hours}h`,s=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${i}${s}${n}`}const bn="Â·",ai=()=>` ${bn} `;function Fn(t){const{newFiles:e,isUploadStarted:i,recoveredState:s,i18n:n,uploadState:o,isSomeGhost:l,startUpload:r}=t,d=V("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":o===X.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":l}),u=e&&i&&!s?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return a("button",{type:"button",className:d,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:r,disabled:l,"data-uppy-super-focusable":!0},u)}function wn(t){const{i18n:e,uppy:i}=t;return a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>i.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},a("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function Pn(t){const{i18n:e,uppy:i}=t;return a("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>i.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},a("g",{fill:"none",fillRule:"evenodd"},a("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),a("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Sn(t){const{isAllPaused:e,i18n:i,isAllComplete:s,resumableUploads:n,uppy:o}=t,l=i(e?"resume":"pause");function r(){if(!s){if(!n){o.cancelAll();return}if(e){o.resumeAll();return}o.pauseAll()}}return a("button",{title:l,"aria-label":l,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:r,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},a("g",{fill:"none",fillRule:"evenodd"},a("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),a("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function Tn(t){const{i18n:e,doneButtonHandler:i}=t;return a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:i,"data-uppy-super-focusable":!0},e("done"))}function Ii(){return a("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},a("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function Cn(t){const{progress:e}=t,{value:i,mode:s,message:n}=e;return a("div",{className:"uppy-StatusBar-content"},a(Ii,null),s==="determinate"?`${Math.round(i*100)}% Â· `:"",n)}function En(t){const{numUploads:e,complete:i,totalUploadedSize:s,totalSize:n,totalETA:o,i18n:l}=t,r=e>1;return a("div",{className:"uppy-StatusBar-statusSecondary"},r&&l("filesUploadedOfTotal",{complete:i,smart_count:e}),a("span",{className:"uppy-StatusBar-additionalInfo"},r&&ai(),l("dataUploadedOfTotal",{complete:ve(s),total:ve(n)}),ai(),l("xTimeLeft",{time:vn(o)})))}function Bi(t){const{i18n:e,complete:i,numUploads:s}=t;return a("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:i,smart_count:s}))}function An(t){const{i18n:e,newFiles:i,startUpload:s}=t,n=V("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return a("div",{className:"uppy-StatusBar-statusSecondary"},a("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:i})),a("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:i}),onClick:s},e("upload")))}function On(t){const{i18n:e,supportsUploadProgress:i,totalProgress:s,showProgressDetails:n,isUploadStarted:o,isAllComplete:l,isAllPaused:r,newFiles:d,numUploads:u,complete:c,totalUploadedSize:h,totalSize:f,totalETA:g,startUpload:v}=t,w=d&&o;if(!o||l)return null;const m=e(r?"paused":"uploading");function b(){return!r&&!w&&n?i?a(En,{numUploads:u,complete:c,totalUploadedSize:h,totalSize:f,totalETA:g,i18n:e}):a(Bi,{i18n:e,complete:c,numUploads:u}):null}return a("div",{className:"uppy-StatusBar-content","aria-label":m,title:m},r?null:a(Ii,null),a("div",{className:"uppy-StatusBar-status"},a("div",{className:"uppy-StatusBar-statusPrimary"},i?`${m}: ${s}%`:m),b(),w?a(An,{i18n:e,newFiles:d,startUpload:v}):null))}function Un(t){const{i18n:e}=t;return a("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},a("div",{className:"uppy-StatusBar-status"},a("div",{className:"uppy-StatusBar-statusPrimary"},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},a("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function Rn(t){const{error:e,i18n:i,complete:s,numUploads:n}=t;function o(){const l=`${i("uploadFailed")} 

 ${e}`;alert(l)}return a("div",{className:"uppy-StatusBar-content",title:i("uploadFailed")},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},a("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),a("div",{className:"uppy-StatusBar-status"},a("div",{className:"uppy-StatusBar-statusPrimary"},i("uploadFailed"),a("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":i("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:o,type:"button"},"?")),a(Bi,{i18n:i,complete:s,numUploads:n})))}const{STATE_ERROR:li,STATE_WAITING:Dn,STATE_PREPROCESSING:Pt,STATE_UPLOADING:et,STATE_POSTPROCESSING:St,STATE_COMPLETE:tt}=X;function Nn(t){let{newFiles:e,allowNewUpload:i,isUploadInProgress:s,isAllPaused:n,resumableUploads:o,error:l,hideUploadButton:r=void 0,hidePauseResumeButton:d=!1,hideCancelButton:u=!1,hideRetryButton:c=!1,recoveredState:h,uploadState:f,totalProgress:g,files:v,supportsUploadProgress:w,hideAfterFinish:m=!1,isSomeGhost:b,doneButtonHandler:F=void 0,isUploadStarted:T,i18n:S,startUpload:q,uppy:L,isAllComplete:O,showProgressDetails:A=void 0,numUploads:M,complete:Ee,totalSize:Pe,totalETA:ae,totalUploadedSize:lt}=t;function dt(){switch(f){case St:case Pt:{const Ye=wt(v);return Ye.mode==="determinate"?Ye.value*100:g}case li:return null;case et:return w?g:null;default:return g}}function Xi(){switch(f){case St:case Pt:{const{mode:Ye}=wt(v);return Ye==="indeterminate"}case et:return!w;default:return!1}}const ut=dt(),ct=ut??100,Vt=!l&&e&&(!s&&!n||h)&&i&&!r,Kt=!u&&f!==Dn&&f!==tt,Xt=o&&!d&&f===et,Yt=l&&!O&&!c,Qt=F&&f===tt,Yi=V("uppy-StatusBar-progress",{"is-indeterminate":Xi()}),Qi=V("uppy-StatusBar",`is-${f}`,{"has-ghosts":b}),Jt=(()=>{switch(f){case Pt:case St:return a(Cn,{progress:wt(v)});case tt:return a(Un,{i18n:S});case li:return a(Rn,{error:l,i18n:S,numUploads:M,complete:Ee});case et:return a(On,{i18n:S,supportsUploadProgress:w,totalProgress:g,showProgressDetails:A,isUploadStarted:T,isAllComplete:O,isAllPaused:n,newFiles:e,numUploads:M,complete:Ee,totalUploadedSize:lt,totalSize:Pe,totalETA:ae,startUpload:q});default:return null}})();return a("div",{className:Qi,"aria-hidden":!(Vt||Yt||Xt||Kt||Qt)&&!Jt||f===tt&&m},a("div",{className:Yi,style:{width:`${ct}%`},role:"progressbar","aria-label":`${ct}%`,"aria-valuetext":`${ct}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":ut}),Jt,a("div",{className:"uppy-StatusBar-actions"},Vt?a(Fn,{newFiles:e,isUploadStarted:T,recoveredState:h,i18n:S,isSomeGhost:b,startUpload:q,uploadState:f}):null,Yt?a(wn,{i18n:S,uppy:L}):null,Xt?a(Sn,{isAllPaused:n,i18n:S,isAllComplete:O,resumableUploads:o,uppy:L}):null,Kt?a(Pn,{i18n:S,uppy:L}):null,Qt?a(Tn,{i18n:S,doneButtonHandler:F}):null))}const In={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function C(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Bn=0;function Ce(t){return"__private_"+Bn+++"_"+t}const Mn={version:"4.0.5"},xn=2e3,Ln=2e3;function _n(t,e,i,s){if(t)return X.STATE_ERROR;if(e)return X.STATE_COMPLETE;if(i)return X.STATE_WAITING;let n=X.STATE_WAITING;const o=Object.keys(s);for(let l=0;l<o.length;l++){const{progress:r}=s[o[l]];if(r.uploadStarted&&!r.uploadComplete)return X.STATE_UPLOADING;r.preprocess&&(n=X.STATE_PREPROCESSING),r.postprocess&&n!==X.STATE_PREPROCESSING&&(n=X.STATE_POSTPROCESSING)}return n}const kn={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var j=Ce("lastUpdateTime"),W=Ce("previousUploadedBytes"),se=Ce("previousSpeed"),k=Ce("previousETA"),Tt=Ce("computeSmoothETA"),Le=Ce("onUploadStart");class Mi extends we{constructor(e,i){super(e,{...kn,...i}),Object.defineProperty(this,Tt,{value:$n}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,Le,{writable:!0,value:()=>{const{recoveredState:s}=this.uppy.getState();if(C(this,se)[se]=null,C(this,k)[k]=null,s){C(this,W)[W]=Object.values(s.files).reduce((n,o)=>{let{progress:l}=o;return n+l.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}C(this,j)[j]=performance.now(),C(this,W)[W]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=In,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){const{capabilities:i,files:s,allowNewUpload:n,totalProgress:o,error:l,recoveredState:r}=e,{newFiles:d,startedFiles:u,completeFiles:c,isUploadStarted:h,isAllComplete:f,isAllPaused:g,isUploadInProgress:v,isSomeGhost:w}=this.uppy.getObjectOfFilesPerState(),m=r?Object.values(s):d,b=!!i.resumableUploads,F=i.uploadProgress!==!1;let T=0,S=0;u.forEach(L=>{T+=L.progress.bytesTotal||0,S+=L.progress.bytesUploaded||0});const q=C(this,Tt)[Tt]({uploaded:S,total:T,remaining:T-S});return Nn({error:l,uploadState:_n(l,f,r,e.files||{}),allowNewUpload:n,totalProgress:o,totalSize:T,totalUploadedSize:S,isAllComplete:!1,isAllPaused:g,isUploadStarted:h,isUploadInProgress:v,isSomeGhost:w,recoveredState:r,complete:c.length,newFiles:m.length,numUploads:u.length,totalETA:q,files:s,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:b,supportsUploadProgress:F,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const e=this.el;Ui(e)||(e.dir="ltr")}install(){const{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",C(this,Le)[Le]),C(this,j)[j]=performance.now(),C(this,W)[W]=this.uppy.getFiles().reduce((i,s)=>i+s.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",C(this,Le)[Le])}}function $n(t){var e,i;if(t.total===0||t.remaining===0)return 0;(i=(e=C(this,j))[j])!=null||(e[j]=performance.now());const s=performance.now()-C(this,j)[j];if(s===0){var n;return Math.round(((n=C(this,k)[k])!=null?n:0)/100)/10}const o=t.uploaded-C(this,W)[W];if(C(this,W)[W]=t.uploaded,o<=0){var l;return Math.round(((l=C(this,k)[k])!=null?l:0)/100)/10}const r=o/s,d=C(this,se)[se]==null?r:oi(r,C(this,se)[se],xn,s);C(this,se)[se]=d;const u=t.remaining/d,c=Math.max(C(this,k)[k]-s,0),h=C(this,k)[k]==null?u:oi(u,c,Ln,s);return C(this,k)[k]=h,C(this,j)[j]=performance.now(),Math.round(h/100)/10}Mi.VERSION=Mn.version;const di=300;class zn extends Ke{constructor(){super(...arguments),this.ref=ns()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,di)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,di)}render(){const{children:e}=this.props;return a("div",{className:"uppy-Informer-animated",ref:this.ref},e)}}function qn(t,e){return Object.assign(t,e)}function jn(t,e){var i;return(i=t==null?void 0:t.key)!=null?i:e}function Hn(t,e){const i=t._ptgLinkedRefs||(t._ptgLinkedRefs={});return i[e]||(i[e]=s=>{t.refs[e]=s})}function _e(t){const e={};for(let i=0;i<t.length;i++)if(t[i]!=null){const s=jn(t[i],i.toString(36));e[s]=t[i]}return e}function Wn(t,e){t=t||{},e=e||{};const i=l=>e.hasOwnProperty(l)?e[l]:t[l],s={};let n=[];for(const l in t)e.hasOwnProperty(l)?n.length&&(s[l]=n,n=[]):n.push(l);const o={};for(const l in e){if(s.hasOwnProperty(l))for(let r=0;r<s[l].length;r++){const d=s[l][r];o[s[l][r]]=i(d)}o[l]=i(l)}for(let l=0;l<n.length;l++)o[n[l]]=i(n[l]);return o}const Gn=t=>t;class xi extends Ke{constructor(e,i){super(e,i),this.refs={},this.state={children:_e(fe(fe(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const i in e)e[i]&&this.performAppear(i)}componentWillReceiveProps(e){const i=_e(fe(e.children)||[]),s=this.state.children;this.setState(o=>({children:Wn(o.children,i)}));let n;for(n in i)if(i.hasOwnProperty(n)){const o=s&&s.hasOwnProperty(n);i[n]&&o&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):i[n]&&!o&&!this.currentlyTransitioningKeys[n]&&this.keysToEnter.push(n)}for(n in s)if(s.hasOwnProperty(n)){const o=i&&i.hasOwnProperty(n);s[n]&&!o&&!this.currentlyTransitioningKeys[n]&&this.keysToLeave.push(n)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:i}=this;this.keysToLeave=[],i.forEach(this.performLeave)}_finishAbort(e){const i=this.keysToAbortLeave.indexOf(e);i!==-1&&this.keysToAbortLeave.splice(i,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const i=this.refs[e];i!=null&&i.componentWillAppear?i.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const i=this.refs[e];i!=null&&i.componentDidAppear&&i.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=_e(fe(this.props.children)||[]);(!s||!s.hasOwnProperty(e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const i=this.refs[e];i!=null&&i.componentWillEnter?i.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const i=this.refs[e];i!=null&&i.componentDidEnter&&i.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=_e(fe(this.props.children)||[]);(!s||!s.hasOwnProperty(e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const s=this.refs[e];s!=null&&s.componentWillLeave?s.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const s=this.refs[e];s!=null&&s.componentDidLeave&&s.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const n=_e(fe(this.props.children)||[]);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{const o=qn({},this.state.children);delete o[e],this.setState({children:o})}}render(e,i){let{childFactory:s,transitionLeave:n,transitionName:o,transitionAppear:l,transitionEnter:r,transitionLeaveTimeout:d,transitionEnterTimeout:u,transitionAppearTimeout:c,component:h,...f}=e,{children:g}=i;const v=Object.entries(g).map(w=>{let[m,b]=w;if(!b)return;const F=Hn(this,m);return wi(s(b),{ref:F,key:m})}).filter(Boolean);return a(h,f,v)}}xi.defaultProps={component:"span",childFactory:Gn};const Vn={version:"4.1.2"};class Li extends we{constructor(e,i){super(e,i),this.render=s=>a("div",{className:"uppy uppy-Informer"},a(xi,null,s.info.map(n=>a(zn,{key:n.message},a("p",{role:"alert"},n.message," ",n.details&&a("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:e}=this.opts;e&&this.mount(e,this)}}Li.VERSION=Vn.version;const Kn=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function Xn(t,e,i){var s,n;const o=Kn.exec(t),l=(s=(n=e.mimeType)!=null?n:o==null?void 0:o[1])!=null?s:"plain/text";let r;if((o==null?void 0:o[2])!=null){const d=atob(decodeURIComponent(o[3])),u=new Uint8Array(d.length);for(let c=0;c<d.length;c++)u[c]=d.charCodeAt(c);r=[u]}else(o==null?void 0:o[3])!=null&&(r=[decodeURIComponent(o[3])]);return new Blob(r,{type:l})}function ui(t){return t.startsWith("blob:")}function ci(t){return t?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(t):!1}const Yn={strings:{generatingThumbnails:"Generating thumbnails..."}},Qn={version:"4.0.2"};function Jn(t,e,i){try{t.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return t.toBlob?new Promise(s=>{t.toBlob(s,e,i)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>Xn(t.toDataURL(e,i),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}function Zn(t,e){let i=t.width,s=t.height;(e.deg===90||e.deg===270)&&(i=t.height,s=t.width);const n=document.createElement("canvas");n.width=i,n.height=s;const o=n.getContext("2d");return o.translate(i/2,s/2),e.canvas&&(o.rotate(e.rad),o.scale(e.scaleX,e.scaleY)),o.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),n}function er(t){const e=t.width/t.height,i=5e6,s=4096;let n=Math.floor(Math.sqrt(i*e)),o=Math.floor(i/Math.sqrt(i*e));if(n>s&&(n=s,o=Math.round(n/e)),o>s&&(o=s,n=Math.round(e*o)),t.width>n){const l=document.createElement("canvas");return l.width=n,l.height=o,l.getContext("2d").drawImage(t,0,0,n,o),l}return t}const tr={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class _i extends we{constructor(e,i){if(super(e,{...tr,...i}),this.onFileAdded=s=>{!s.preview&&s.data&&ci(s.type)&&!s.isRemote&&this.addToQueue(s.id)},this.onCancelRequest=s=>{const n=this.queue.indexOf(s.id);n!==-1&&this.queue.splice(n,1)},this.onFileRemoved=s=>{const n=this.queue.indexOf(s.id);n!==-1&&this.queue.splice(n,1),s.preview&&ui(s.preview)&&URL.revokeObjectURL(s.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||ui(n.preview))&&this.addToQueue(n.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=s=>{s.forEach(o=>{const l=this.uppy.getFile(o);this.uppy.emit("preprocess-progress",l,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const n=()=>{s.forEach(o=>{const l=this.uppy.getFile(o);this.uppy.emit("preprocess-complete",l)})};return new Promise(o=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),o()}):(n(),o())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=Yn,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,i,s){const n=URL.createObjectURL(e.data),o=new Promise((r,d)=>{const u=new Image;u.src=n,u.addEventListener("load",()=>{URL.revokeObjectURL(n),r(u)}),u.addEventListener("error",c=>{URL.revokeObjectURL(n),d(c.error||new Error("Could not create thumbnail"))})}),l=as(e.data).catch(()=>1);return Promise.all([o,l]).then(r=>{let[d,u]=r;const c=this.getProportionalDimensions(d,i,s,u.deg),h=Zn(d,u),f=this.resizeImage(h,c.width,c.height);return Jn(f,this.thumbnailType,80)}).then(r=>URL.createObjectURL(r))}getProportionalDimensions(e,i,s,n){let o=e.width/e.height;return(n===90||n===270)&&(o=e.height/e.width),i!=null?{width:i,height:Math.round(i/o)}:s!=null?{width:Math.round(s*o),height:s}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/o)}}resizeImage(e,i,s){let n=er(e),o=Math.ceil(Math.log2(n.width/i));o<1&&(o=1);let l=i*2**(o-1),r=s*2**(o-1);const d=2;for(;o--;){const u=document.createElement("canvas");u.width=l,u.height=r,u.getContext("2d").drawImage(n,0,0,l,r),n=u,l=Math.round(l/d),r=Math.round(r/d)}return n}setPreviewURL(e,i){this.uppy.setFileState(e,{preview:i})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return ci(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(i=>{this.setPreviewURL(e.id,i),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),i)}).catch(i=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(i,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),i)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}_i.VERSION=Qn.version;function hi(t){if(typeof t=="string"){const e=document.querySelectorAll(t);return e.length===0?null:Array.from(e)}return typeof t=="object"&&Oi(t)?[t]:null}const Ge=Array.from;function ki(t,e,i,s){let{onSuccess:n}=s;t.readEntries(o=>{const l=[...e,...o];o.length?queueMicrotask(()=>{ki(t,l,i,{onSuccess:n})}):n(l)},o=>{i(o),n(e)})}function $i(t,e){return t==null?t:{kind:t.isFile?"file":t.isDirectory?"directory":void 0,name:t.name,getFile(){return new Promise((i,s)=>t.file(i,s))},async*values(){const i=t.createReader();yield*await new Promise(n=>{ki(i,[],e,{onSuccess:o=>n(o.map(l=>$i(l,e)))})})},isSameEntry:void 0}}function zi(t,e,i){try{return i===void 0&&(i=void 0),async function*(){const s=()=>`${e}/${t.name}`;if(t.kind==="file"){const n=await t.getFile();n!=null?(n.relativePath=e?s():null,yield n):i!=null&&(yield i)}else if(t.kind==="directory")for await(const n of t.values())yield*zi(n,e?s():t.name);else i!=null&&(yield i)}()}catch(s){return Promise.reject(s)}}async function*ir(t,e){const i=await Promise.all(Array.from(t.items,async s=>{var n;let o;const l=()=>typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry();return(n=o)!=null||(o=$i(l(),e)),{fileSystemHandle:o,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:n}of i)if(n!=null)try{yield*zi(n,"",s)}catch(o){s!=null?yield s:e(o)}else s!=null&&(yield s)}function sr(t){const e=Ge(t.files);return Promise.resolve(e)}async function nr(t,e){var i;const s=(i=e==null?void 0:e.logDropError)!=null?i:Function.prototype;try{const n=[];for await(const o of ir(t,s))n.push(o);return n}catch{return sr(t)}}function jt(){return jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},jt.apply(null,arguments)}const rr={position:"relative",width:"100%",minHeight:"100%"},or={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class ar extends Ke{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let{data:i,rowHeight:s,renderRow:n,overscanCount:o=10,...l}=e;const{offset:r,height:d}=this.state;let u=Math.floor(r/s),c=Math.floor(d/s);o&&(u=Math.max(0,u-u%o),c+=o);const h=u+c+4,f=i.slice(u,h),g={...rr,height:i.length*s},v={...or,top:u*s};return a("div",jt({onScroll:this.handleScroll},l),a("div",{role:"presentation",style:g},a("div",{role:"presentation",style:v},f.map(n))))}}function lr(){return a("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},a("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}const qi=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function ji(t,e){if(e){const i=t.querySelector(`[data-uppy-paneltype="${e}"]`);if(i)return i}return t}function pi(t,e){const i=e[0];i&&(i.focus(),t.preventDefault())}function dr(t,e){const i=e[e.length-1];i&&(i.focus(),t.preventDefault())}function ur(t){return t.contains(document.activeElement)}function Hi(t,e,i){const s=ji(i,e),n=Ge(s.querySelectorAll(qi)),o=n.indexOf(document.activeElement);ur(s)?t.shiftKey&&o===0?dr(t,n):!t.shiftKey&&o===n.length-1&&pi(t,n):pi(t,n)}function cr(t,e,i){e===null||Hi(t,e,i)}function hr(){let t=!1;return es((i,s)=>{const n=ji(i,s),o=n.contains(document.activeElement);if(o&&t)return;const l=n.querySelector("[data-uppy-super-focusable]");if(!(o&&!l))if(l)l.focus({preventScroll:!0}),t=!0;else{const r=n.querySelector(qi);r==null||r.focus({preventScroll:!0}),t=!1}},260)}function pr(){const t=document.body;return!(!("draggable"in t)||!("ondragstart"in t&&"ondrop"in t)||!("FormData"in window)||!("FileReader"in window))}function fr(){return a("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},a("g",{fill:"#686DE0",fillRule:"evenodd"},a("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),a("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),a("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function mr(){return a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},a("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function gr(){return a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},a("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function yr(){return a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},a("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function vr(){return a("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},a("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function br(){return a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},a("g",{fill:"#A7AFB7",fillRule:"nonzero"},a("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),a("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function Fr(){return a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},a("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function Gt(t){const e={color:"#838999",icon:br()};if(!t)return e;const i=t.split("/")[0],s=t.split("/")[1];return i==="text"?{color:"#5a5e69",icon:Fr()}:i==="image"?{color:"#686de0",icon:fr()}:i==="audio"?{color:"#068dbb",icon:mr()}:i==="video"?{color:"#19af67",icon:gr()}:i==="application"&&s==="pdf"?{color:"#e25149",icon:yr()}:i==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:vr()}:e}function Wi(t){const{file:e}=t;if(e.preview)return a("img",{className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:i,icon:s}=Gt(e.type);return a("div",{className:"uppy-Dashboard-Item-previewIconWrap"},a("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:i}},s),a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},a("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}const wr=(t,e)=>(typeof e=="function"?e():e).filter(n=>n.id===t)[0].name;function Gi(t){const{file:e,toggleFileCard:i,i18n:s,metaFields:n}=t,{missingRequiredMetaFields:o}=e;if(!(o!=null&&o.length))return null;const l=o.map(r=>wr(r,n)).join(", ");return a("div",{className:"uppy-Dashboard-Item-errorMessage"},s("missingRequiredMetaFields",{smart_count:o.length,fields:l})," ",a("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>i(!0,e.id)},s("editFile")))}function Pr(t){const{file:e,i18n:i,toggleFileCard:s,metaFields:n,showLinkToFileUploadResult:o}=t,r=e.preview?"rgba(255, 255, 255, 0.5)":Gt(e.type).color;return a("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:r}},o&&e.uploadURL&&a("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name},a("span",{hidden:!0},e.meta.name)),a(Wi,{file:e}),a(Gi,{file:e,i18n:i,toggleFileCard:s,metaFields:n}))}function Sr(t){if(!t.isUploaded){if(t.error&&!t.hideRetryButton){t.uppy.retryUpload(t.file.id);return}t.resumableUploads&&!t.hidePauseResumeButton?t.uppy.pauseResume(t.file.id):t.individualCancellation&&!t.hideCancelButton&&t.uppy.removeFile(t.file.id)}}function fi(t){return t.isUploaded?t.i18n("uploadComplete"):t.error?t.i18n("retryUpload"):t.resumableUploads?t.file.isPaused?t.i18n("resumeUpload"):t.i18n("pauseUpload"):t.individualCancellation?t.i18n("cancelUpload"):""}function Ct(t){return a("div",{className:"uppy-Dashboard-Item-progress"},a("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":fi(t),title:fi(t),onClick:()=>Sr(t)},t.children))}function it(t){let{children:e}=t;return a("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function Et(t){let{progress:e}=t;const i=2*Math.PI*15;return a("g",null,a("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),a("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":i,"stroke-dashoffset":i-i/100*e}))}function Tr(t){return!t.file.progress.uploadStarted||t.file.progress.percentage===void 0?null:t.isUploaded?a("div",{className:"uppy-Dashboard-Item-progress"},a("div",{className:"uppy-Dashboard-Item-progressIndicator"},a(it,null,a("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),a("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):t.recoveredState?null:t.error&&!t.hideRetryButton?a(Ct,t,a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},a("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),a("path",{d:"M7.9 3H10v2H7.9z"}),a("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),a("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):t.resumableUploads&&!t.hidePauseResumeButton?a(Ct,t,a(it,null,a(Et,{progress:t.file.progress.percentage}),t.file.isPaused?a("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):a("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},a("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),a("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!t.resumableUploads&&t.individualCancellation&&!t.hideCancelButton?a(Ct,t,a(it,null,a(Et,{progress:t.file.progress.percentage}),a("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):a("div",{className:"uppy-Dashboard-Item-progress"},a("div",{className:"uppy-Dashboard-Item-progressIndicator"},a(it,null,a(Et,{progress:t.file.progress.percentage}))))}const At="...";function Vi(t,e){if(e===0)return"";if(t.length<=e)return t;if(e<=At.length+1)return`${t.slice(0,e-1)}â€¦`;const i=e-At.length,s=Math.ceil(i/2),n=Math.floor(i/2);return t.slice(0,s)+At+t.slice(-n)}const Cr=t=>{const{author:e,name:i}=t.file.meta;function s(){return t.isSingleFile&&t.containerHeight>=350?90:t.containerWidth<=352?35:t.containerWidth<=576?60:e?20:30}return a("div",{className:"uppy-Dashboard-Item-name",title:i},Vi(i,s()))},Er=t=>{var e;const{author:i}=t.file.meta,s=(e=t.file.remote)==null?void 0:e.providerName,n="Â·";return i?a("div",{className:"uppy-Dashboard-Item-author"},a("a",{href:`${i.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},Vi(i.name,13)),s?a(Fragment,null,` ${n} `,s,` ${n} `):null):null},Ar=t=>t.file.size&&a("div",{className:"uppy-Dashboard-Item-statusSize"},ve(t.file.size)),Or=t=>t.file.isGhost&&a("span",null," â€¢ ",a("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>t.toggleAddFilesPanel(!0)},t.i18n("reSelect"))),Ur=t=>{let{file:e,onClick:i}=t;return e.error?a("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:i,type:"button"},"?"):null};function Rr(t){const{file:e,i18n:i,toggleFileCard:s,metaFields:n,toggleAddFilesPanel:o,isSingleFile:l,containerHeight:r,containerWidth:d}=t;return a("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},a("div",{className:"uppy-Dashboard-Item-fileName"},Cr({file:e,isSingleFile:l,containerHeight:r,containerWidth:d}),a(Ur,{file:e,onClick:()=>alert(e.error)})),a("div",{className:"uppy-Dashboard-Item-status"},Er({file:e}),Ar({file:e}),Or({file:e,toggleAddFilesPanel:o,i18n:i})),a(Gi,{file:e,i18n:i,toggleFileCard:s,metaFields:n}))}function Dr(t,e){return e===void 0&&(e="Copy the URL below"),new Promise(i=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=t,document.body.appendChild(s),s.select();const n=()=>{document.body.removeChild(s),window.prompt(e,t),i()};try{return document.execCommand("copy")?(document.body.removeChild(s),i()):n()}catch{return document.body.removeChild(s),n()}})}function Nr(t){let{file:e,uploadInProgressOrComplete:i,metaFields:s,canEditFile:n,i18n:o,onClick:l}=t;return!i&&s&&s.length>0||!i&&n(e)?a("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":o("editFileWithFilename",{file:e.meta.name}),title:o("editFileWithFilename",{file:e.meta.name}),onClick:()=>l()},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},a("g",{fillRule:"evenodd"},a("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),a("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),a("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function Ir(t){let{i18n:e,onClick:i,file:s}=t;return a("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:s.meta.name}),title:e("removeFile",{file:s.meta.name}),onClick:()=>i()},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},a("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),a("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}function Br(t){let{file:e,uppy:i,i18n:s}=t;const n=o=>{Dr(e.uploadURL,s("copyLinkToClipboardFallback")).then(()=>{i.log("Link copied to clipboard."),i.info(s("copyLinkToClipboardSuccess"),"info",3e3)}).catch(i.log).then(()=>o.target.focus({preventScroll:!0}))};return a("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":s("copyLink"),title:s("copyLink"),onClick:o=>n(o)},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},a("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Mr(t){const{uppy:e,file:i,uploadInProgressOrComplete:s,canEditFile:n,metaFields:o,showLinkToFileUploadResult:l,showRemoveButton:r,i18n:d,toggleFileCard:u,openFileEditor:c}=t;return a("div",{className:"uppy-Dashboard-Item-actionWrapper"},a(Nr,{i18n:d,file:i,uploadInProgressOrComplete:s,canEditFile:n,metaFields:o,onClick:()=>{o&&o.length>0?u(!0,i.id):c(i)}}),l&&i.uploadURL?a(Br,{file:i,uppy:e,i18n:d}):null,r?a(Ir,{i18n:d,file:i,onClick:()=>e.removeFile(i.id)}):null)}class xr extends Ke{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!ls(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,i=e.progress.preprocess||e.progress.postprocess,s=!!e.progress.uploadComplete&&!i&&!e.error,n=!!e.progress.uploadStarted||!!i,o=e.progress.uploadStarted&&!e.progress.uploadComplete||i,l=e.error||!1,{isGhost:r}=e;let d=(this.props.individualCancellation||!o)&&!s;s&&this.props.showRemoveButtonAfterComplete&&(d=!0);const u=V({"uppy-Dashboard-Item":!0,"is-inprogress":o&&!this.props.recoveredState,"is-processing":i,"is-complete":s,"is-error":!!l,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":r});return a("div",{className:u,id:`uppy_${e.id}`,role:this.props.role},a("div",{className:"uppy-Dashboard-Item-preview"},a(Pr,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),a(Tr,{uppy:this.props.uppy,file:e,error:l,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),a("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},a(Rr,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),a(Mr,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:d,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}function Lr(t,e){const i=[];let s=[];return t.forEach(n=>{s.length<e?s.push(n):(i.push(s),s=[n])}),s.length&&i.push(s),i}function _r(t){let{id:e,i18n:i,uppy:s,files:n,resumableUploads:o,hideRetryButton:l,hidePauseResumeButton:r,hideCancelButton:d,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:c,metaFields:h,isSingleFile:f,toggleFileCard:g,handleRequestThumbnail:v,handleCancelThumbnail:w,recoveredState:m,individualCancellation:b,itemsPerRow:F,openFileEditor:T,canEditFile:S,toggleAddFilesPanel:q,containerWidth:L,containerHeight:O}=t;const A=F===1?71:200,M=rs(()=>{const Pe=(lt,dt)=>Number(n[dt].isGhost)-Number(n[lt].isGhost),ae=Object.keys(n);return m&&ae.sort(Pe),Lr(ae,F)},[n,F,m]),Ee=Pe=>a("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:Pe[0]},Pe.map(ae=>a(xr,{key:ae,uppy:s,id:e,i18n:i,resumableUploads:o,individualCancellation:b,hideRetryButton:l,hidePauseResumeButton:r,hideCancelButton:d,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:c,metaFields:h,recoveredState:m,isSingleFile:f,containerWidth:L,containerHeight:O,toggleFileCard:g,handleRequestThumbnail:v,handleCancelThumbnail:w,role:"listitem",openFileEditor:T,canEditFile:S,toggleAddFilesPanel:q,file:n[ae]})));return f?a("div",{class:"uppy-Dashboard-files"},Ee(M[0])):a(ar,{class:"uppy-Dashboard-files",role:"list",data:M,renderRow:Ee,rowHeight:A})}class Ki extends Ke{constructor(){super(...arguments),this.fileInput=null,this.folderInput=null,this.mobilePhotoFileInput=null,this.mobileVideoFileInput=null,this.triggerFileInputClick=()=>{var e;(e=this.fileInput)==null||e.click()},this.triggerFolderInputClick=()=>{var e;(e=this.folderInput)==null||e.click()},this.triggerVideoCameraInputClick=()=>{var e;(e=this.mobileVideoFileInput)==null||e.click()},this.triggerPhotoCameraInputClick=()=>{var e;(e=this.mobilePhotoFileInput)==null||e.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""},this.renderHiddenInput=(e,i)=>{var s;return a("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(s=this.props.allowedFileTypes)==null?void 0:s.join(", "),ref:i})},this.renderHiddenCameraInput=(e,i,s)=>{const o={photo:"image/*",video:"video/*"}[e];return a("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:i,accept:o,ref:s})},this.renderMyDeviceAcquirer=()=>a("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},a("div",{className:"uppy-DashboardTab-inner"},a("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},a("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),a("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>a("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},a("div",{className:"uppy-DashboardTab-inner"},a("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},a("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),a("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>a("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},a("div",{className:"uppy-DashboardTab-inner"},a("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},a("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),a("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(e,i)=>{const s=this.props.acquirers.length;return a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:i,"data-uppy-super-focusable":s===0},e)},this.renderDropPasteBrowseTagline=e=>{const i=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),s=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,o=n.charAt(0).toUpperCase()+n.slice(1);return a("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${o}`,{browseFiles:i,browseFolders:s,browse:i}):this.props.i18nArray(`dropPaste${o}`,{browseFiles:i,browseFolders:s,browse:i}))},this.renderAcquirer=e=>{var i;return a("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":((i=this.props.activePickerPanel)==null?void 0:i.id)===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},a("div",{className:"uppy-DashboardTab-inner"},e.icon()),a("div",{className:"uppy-DashboardTab-name"},e.name)))},this.renderAcquirers=e=>{const i=[...e],s=i.splice(e.length-2,e.length);return a(Qe,null,i.map(n=>this.renderAcquirer(n)),a("span",{role:"presentation",style:{"white-space":"nowrap"}},s.map(n=>this.renderAcquirer(n))))},this.renderSourcesList=(e,i)=>{const{showNativePhotoCameraButton:s,showNativeVideoCameraButton:n}=this.props;let o=[];const l="myDevice";i||o.push({key:l,elements:this.renderMyDeviceAcquirer()}),s&&o.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),n&&o.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),o.push(...e.map(c=>({key:c.id,elements:this.renderAcquirer(c)}))),o.length===1&&o[0].key===l&&(o=[]);const d=[...o],u=d.splice(o.length-2,o.length);return a(Qe,null,this.renderDropPasteBrowseTagline(o.length),a("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},d.map(c=>{let{key:h,elements:f}=c;return a(Qe,{key:h},f)}),a("span",{role:"presentation",style:{"white-space":"nowrap"}},u.map(c=>{let{key:h,elements:f}=c;return a(Qe,{key:h},f)}))))}}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:e}=this.props,i=a("span",null,a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},a("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),a("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),s=e("poweredBy",{uppy:i});return a("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},s)}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:i,nativeCameraFacingMode:s}=this.props;return a("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,n=>{this.fileInput=n}),this.renderHiddenInput(!0,n=>{this.folderInput=n}),e&&this.renderHiddenCameraInput("photo",s,n=>{this.mobilePhotoFileInput=n}),i&&this.renderHiddenCameraInput("video",s,n=>{this.mobileVideoFileInput=n}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),a("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&a("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()))}}const kr=t=>a("div",{className:V("uppy-Dashboard-AddFilesPanel",t.className),"data-uppy-panelType":"AddFiles","aria-hidden":!t.showAddFilesPanel},a("div",{className:"uppy-DashboardContent-bar"},a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},t.i18n("addingMoreFiles")),a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>t.toggleAddFilesPanel(!1)},t.i18n("back"))),a(Ki,t));function oe(t){const{tagName:e}=t.target;if(e==="INPUT"||e==="TEXTAREA"){t.stopPropagation();return}t.preventDefault(),t.stopPropagation()}function $r(t){let{activePickerPanel:e,className:i,hideAllPanels:s,i18n:n,state:o,uppy:l}=t;const r=nt(null);return a("div",{className:V("uppy-DashboardContent-panel",i),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:oe,onDragLeave:oe,onDrop:oe,onPaste:oe},a("div",{className:"uppy-DashboardContent-bar"},a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},n("importFrom",{name:e.name})),a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:s},n("cancel"))),a("div",{ref:r,className:"uppy-DashboardContent-panelBody"},l.getPlugin(e.id).render(o,r.current)))}function zr(t){const e=t.files[t.fileCardFor],i=()=>{t.uppy.emit("file-editor:cancel",e),t.closeFileEditor()};return a("div",{className:V("uppy-DashboardContent-panel",t.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},a("div",{className:"uppy-DashboardContent-bar"},a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},t.i18nArray("editing",{file:a("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:i},t.i18n("cancel")),a("button",{className:"uppy-DashboardContent-save",type:"button",onClick:t.saveFileEditor},t.i18n("save"))),a("div",{className:"uppy-DashboardContent-panelBody"},t.editors.map(s=>t.uppy.getPlugin(s.id).render(t.state))))}const K={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function qr(t,e,i,s){if(s===void 0&&(s={}),t)return K.STATE_ERROR;if(e)return K.STATE_COMPLETE;if(i)return K.STATE_PAUSED;let n=K.STATE_WAITING;const o=Object.keys(s);for(let l=0;l<o.length;l++){const{progress:r}=s[o[l]];if(r.uploadStarted&&!r.uploadComplete)return K.STATE_UPLOADING;r.preprocess&&n!==K.STATE_UPLOADING&&(n=K.STATE_PREPROCESSING),r.postprocess&&n!==K.STATE_UPLOADING&&n!==K.STATE_PREPROCESSING&&(n=K.STATE_POSTPROCESSING)}return n}function jr(t){let{files:e,i18n:i,isAllComplete:s,isAllErrored:n,isAllPaused:o,inProgressNotPausedFiles:l,newFiles:r,processingFiles:d}=t;switch(qr(n,s,o,e)){case"uploading":return i("uploadingXFiles",{smart_count:l.length});case"preprocessing":case"postprocessing":return i("processingXFiles",{smart_count:d.length});case"paused":return i("uploadPaused");case"waiting":return i("xFilesSelected",{smart_count:r.length});case"complete":return i("uploadComplete");case"error":return i("error")}}function Hr(t){const{i18n:e,isAllComplete:i,hideCancelButton:s,maxNumberOfFiles:n,toggleAddFilesPanel:o,uppy:l}=t;let{allowNewUpload:r}=t;return r&&n&&(r=t.totalFileCount<t.maxNumberOfFiles),a("div",{className:"uppy-DashboardContent-bar"},!i&&!s?a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>l.cancelAll()},e("cancel")):a("div",null),a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},a(jr,t)),r?a("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>o(!0)},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},a("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),a("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):a("div",null))}function Wr(t){const{computedMetaFields:e,requiredMetaFields:i,updateMeta:s,form:n,formState:o}=t,l={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(r=>{const d=`uppy-Dashboard-FileCard-input-${r.id}`,u=i.includes(r.id);return a("fieldset",{key:r.id,className:"uppy-Dashboard-FileCard-fieldset"},a("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:d},r.name),r.render!==void 0?r.render({value:o[r.id],onChange:c=>s(c,r.id),fieldCSSClasses:l,required:u,form:n.id},a):a("input",{className:l.text,id:d,form:n.id,type:r.type||"text",required:u,value:o[r.id],placeholder:r.placeholder,onInput:c=>s(c.target.value,r.id),"data-uppy-super-focusable":!0}))})}function Gr(t){var e;const{files:i,fileCardFor:s,toggleFileCard:n,saveFileCard:o,metaFields:l,requiredMetaFields:r,openFileEditor:d,i18n:u,i18nArray:c,className:h,canEditFile:f}=t,g=()=>typeof l=="function"?l(i[s]):l,v=i[s],w=(e=g())!=null?e:[],m=f(v),b={};w.forEach(A=>{var M;b[A.id]=(M=v.meta[A.id])!=null?M:""});const[F,T]=at(b),S=os(A=>{A.preventDefault(),o(F,s)},[o,F,s]),q=(A,M)=>{T({...F,[M]:A})},L=()=>{n(!1)},[O]=at(()=>{const A=document.createElement("form");return A.setAttribute("tabindex","-1"),A.id=Ht(),A});return Lt(()=>(document.body.appendChild(O),O.addEventListener("submit",S),()=>{O.removeEventListener("submit",S),document.body.removeChild(O)}),[O,S]),a("div",{className:V("uppy-Dashboard-FileCard",h),"data-uppy-panelType":"FileCard",onDragOver:oe,onDragLeave:oe,onDrop:oe,onPaste:oe},a("div",{className:"uppy-DashboardContent-bar"},a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},c("editing",{file:a("span",{className:"uppy-DashboardContent-titleFile"},v.meta?v.meta.name:v.name)})),a("button",{className:"uppy-DashboardContent-back",type:"button",form:O.id,title:u("finishEditingFile"),onClick:L},u("cancel"))),a("div",{className:"uppy-Dashboard-FileCard-inner"},a("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Gt(v.type).color}},a(Wi,{file:v}),m&&a("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:A=>{S(A),d(v)}},u("editImage"))),a("div",{className:"uppy-Dashboard-FileCard-info"},a(Wr,{computedMetaFields:w,requiredMetaFields:r,updateMeta:q,form:O,formState:F})),a("div",{className:"uppy-Dashboard-FileCard-actions"},a("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:O.id},u("saveChanges")),a("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:L,form:O.id},u("cancel")))))}const Se="uppy-transition-slideDownUp",mi=250;function st(t){let{children:e}=t;const[i,s]=at(null),[n,o]=at(""),l=nt(),r=nt(),d=nt(),u=()=>{o(`${Se}-enter`),cancelAnimationFrame(d.current),clearTimeout(r.current),r.current=void 0,d.current=requestAnimationFrame(()=>{o(`${Se}-enter ${Se}-enter-active`),l.current=setTimeout(()=>{o("")},mi)})},c=()=>{o(`${Se}-leave`),cancelAnimationFrame(d.current),clearTimeout(l.current),l.current=void 0,d.current=requestAnimationFrame(()=>{o(`${Se}-leave ${Se}-leave-active`),r.current=setTimeout(()=>{s(null),o("")},mi)})};return Lt(()=>{const h=fe(e)[0];i!==h&&(h&&!i?u():i&&!h&&!r.current&&c(),s(h))},[e,i]),Lt(()=>()=>{clearTimeout(l.current),clearTimeout(r.current),cancelAnimationFrame(d.current)},[]),i?wi(i,{className:V(n,i.props.className)}):null}function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Te.apply(null,arguments)}const gi=900,yi=700,Ot=576,vi=330;function Vr(t){const e=t.totalFileCount===0,i=t.totalFileCount===1,s=t.containerWidth>Ot,n=t.containerHeight>vi,o=V({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":t.disabled,"uppy-Dashboard--animateOpenClose":t.animateOpenClose,"uppy-Dashboard--isClosing":t.isClosing,"uppy-Dashboard--isDraggingOver":t.isDraggingOver,"uppy-Dashboard--modal":!t.inline,"uppy-size--md":t.containerWidth>Ot,"uppy-size--lg":t.containerWidth>yi,"uppy-size--xl":t.containerWidth>gi,"uppy-size--height-md":t.containerHeight>vi,"uppy-Dashboard--isAddFilesPanelVisible":t.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":t.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":t.singleFileFullScreen&&i&&n});let l=1;t.containerWidth>gi?l=5:t.containerWidth>yi?l=4:t.containerWidth>Ot&&(l=3);const r=t.showSelectedFiles&&!e,d=t.recoveredState?Object.keys(t.recoveredState.files).length:null,u=t.files?Object.keys(t.files).filter(f=>t.files[f].isGhost).length:0,c=()=>u>0?t.i18n("recoveredXFiles",{smart_count:u}):t.i18n("recoveredAllFiles");return a("div",{className:o,"data-uppy-theme":t.theme,"data-uppy-num-acquirers":t.acquirers.length,"data-uppy-drag-drop-supported":!t.disableLocalFiles&&pr(),"aria-hidden":t.inline?"false":t.isHidden,"aria-disabled":t.disabled,"aria-label":t.inline?t.i18n("dashboardTitle"):t.i18n("dashboardWindowTitle"),onPaste:t.handlePaste,onDragOver:t.handleDragOver,onDragLeave:t.handleDragLeave,onDrop:t.handleDrop},a("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:t.handleClickOutside}),a("div",{className:"uppy-Dashboard-inner","aria-modal":!t.inline&&"true",role:t.inline?void 0:"dialog",style:{width:t.inline&&t.width?t.width:"",height:t.inline&&t.height?t.height:""}},t.inline?null:a("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":t.i18n("closeModal"),title:t.i18n("closeModal"),onClick:t.closeModal},a("span",{"aria-hidden":"true"},"Ã—")),a("div",{className:"uppy-Dashboard-innerWrap"},a("div",{className:"uppy-Dashboard-dropFilesHereHint"},t.i18n("dropHint")),r&&a(Hr,t),d&&a("div",{className:"uppy-Dashboard-serviceMsg"},a("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},a("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},a("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),a("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),a("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),a("strong",{className:"uppy-Dashboard-serviceMsg-title"},t.i18n("sessionRestored")),a("div",{className:"uppy-Dashboard-serviceMsg-text"},c())),r?a(_r,{id:t.id,i18n:t.i18n,uppy:t.uppy,files:t.files,resumableUploads:t.resumableUploads,hideRetryButton:t.hideRetryButton,hidePauseResumeButton:t.hidePauseResumeButton,hideCancelButton:t.hideCancelButton,showLinkToFileUploadResult:t.showLinkToFileUploadResult,showRemoveButtonAfterComplete:t.showRemoveButtonAfterComplete,metaFields:t.metaFields,toggleFileCard:t.toggleFileCard,handleRequestThumbnail:t.handleRequestThumbnail,handleCancelThumbnail:t.handleCancelThumbnail,recoveredState:t.recoveredState,individualCancellation:t.individualCancellation,openFileEditor:t.openFileEditor,canEditFile:t.canEditFile,toggleAddFilesPanel:t.toggleAddFilesPanel,isSingleFile:i,itemsPerRow:l,containerWidth:t.containerWidth,containerHeight:t.containerHeight}):a(Ki,{i18n:t.i18n,i18nArray:t.i18nArray,acquirers:t.acquirers,handleInputChange:t.handleInputChange,maxNumberOfFiles:t.maxNumberOfFiles,allowedFileTypes:t.allowedFileTypes,showNativePhotoCameraButton:t.showNativePhotoCameraButton,showNativeVideoCameraButton:t.showNativeVideoCameraButton,nativeCameraFacingMode:t.nativeCameraFacingMode,showPanel:t.showPanel,activePickerPanel:t.activePickerPanel,disableLocalFiles:t.disableLocalFiles,fileManagerSelectionType:t.fileManagerSelectionType,note:t.note,proudlyDisplayPoweredByUppy:t.proudlyDisplayPoweredByUppy}),a(st,null,t.showAddFilesPanel?a(kr,Te({key:"AddFiles"},t,{isSizeMD:s})):null),a(st,null,t.fileCardFor?a(Gr,Te({key:"FileCard"},t)):null),a(st,null,t.activePickerPanel?a($r,Te({key:"Picker"},t)):null),a(st,null,t.showFileEditor?a(zr,Te({key:"Editor"},t)):null),a("div",{className:"uppy-Dashboard-progressindicators"},t.progressindicators.map(f=>t.uppy.getPlugin(f.id).render(t.state))))))}const Kr={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function P(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Xr=0;function R(t){return"__private_"+Xr+++"_"+t}const Yr={version:"4.1.3"},Ut=ei.default||ei,bi=9,Qr=27;function Fi(){const t={};return t.promise=new Promise((e,i)=>{t.resolve=e,t.reject=i}),t}const Jr={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:lr,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var ce=R("disabledNodes"),te=R("generateLargeThumbnailIfSingleFile"),ke=R("openFileEditorWhenFilesAdded"),he=R("attachRenderFunctionToTarget"),Rt=R("isTargetSupported"),Dt=R("getAcquirers"),Nt=R("getProgressIndicators"),ie=R("getEditors"),It=R("addSpecifiedPluginsFromOptions"),Bt=R("autoDiscoverPlugins"),pe=R("addSupportedPluginIfNoTarget"),$e=R("getStatusBarOpts"),ze=R("getThumbnailGeneratorOpts"),Mt=R("getInformerOpts"),qe=R("getStatusBarId"),je=R("getThumbnailGeneratorId"),xt=R("getInformerId");class Zr extends we{constructor(e,i){var s,n,o;const l=(s=i==null?void 0:i.autoOpen)!=null?s:null;super(e,{...Jr,...i,autoOpen:l}),Object.defineProperty(this,xt,{value:ro}),Object.defineProperty(this,je,{value:no}),Object.defineProperty(this,qe,{value:so}),Object.defineProperty(this,Mt,{value:io}),Object.defineProperty(this,ze,{value:to}),Object.defineProperty(this,$e,{value:eo}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),this.modalName=`uppy-Dashboard-${Ht()}`,this.superFocus=hr(),this.ifFocusedOnUppyRecently=!1,this.removeTarget=r=>{const u=this.getPluginState().targets.filter(c=>c.id!==r.id);this.setPluginState({targets:u})},this.addTarget=r=>{const d=r.id||r.constructor.name,u=r.title||d,c=r.type;if(c!=="acquirer"&&c!=="progressindicator"&&c!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const h={id:d,name:u,type:c},g=this.getPluginState().targets.slice();return g.push(h),this.setPluginState({targets:g}),this.el},this.hideAllPanels=()=>{var r;const d=this.getPluginState(),u={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};d.activePickerPanel===u.activePickerPanel&&d.showAddFilesPanel===u.showAddFilesPanel&&d.showFileEditor===u.showFileEditor&&d.activeOverlayType===u.activeOverlayType||(this.setPluginState(u),this.uppy.emit("dashboard:close-panel",(r=d.activePickerPanel)==null?void 0:r.id))},this.showPanel=r=>{const{targets:d}=this.getPluginState(),u=d.find(c=>c.type==="acquirer"&&c.id===r);this.setPluginState({activePickerPanel:u,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",r)},this.canEditFile=r=>{const{targets:d}=this.getPluginState();return P(this,ie)[ie](d).some(c=>this.uppy.getPlugin(c.id).canEditFile(r))},this.openFileEditor=r=>{const{targets:d}=this.getPluginState(),u=P(this,ie)[ie](d);this.setPluginState({showFileEditor:!0,fileCardFor:r.id||null,activeOverlayType:"FileEditor"}),u.forEach(c=>{this.uppy.getPlugin(c.id).selectFile(r)})},this.closeFileEditor=()=>{const{metaFields:r}=this.getPluginState();r&&r.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})},this.saveFileEditor=()=>{const{targets:r}=this.getPluginState();P(this,ie)[ie](r).forEach(u=>{this.uppy.getPlugin(u.id).save()}),this.closeFileEditor()},this.openModal=()=>{const{promise:r,resolve:d}=Fi();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const u=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",u,!1),d()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!1}),d();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),r},this.closeModal=r=>{var d;const u=(d=r==null?void 0:r.manualClose)!=null?d:!0,{isHidden:c,isClosing:h}=this.getPluginState();if(c||h)return;const{promise:f,resolve:g}=Fi();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const w=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",w,!1),g()};this.el.addEventListener("animationend",w,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),g();if(document.removeEventListener("keydown",this.handleKeyDownInModal),u&&this.opts.browserBackButtonClose){var v;(v=history.state)!=null&&v[this.modalName]&&history.back()}return this.uppy.emit("dashboard:modal-closed"),f},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=r=>{const{capabilities:d}=this.uppy.getState();this.uppy.setState({capabilities:{...d,darkMode:r}})},this.handleSystemDarkModeChange=r=>{const d=r.matches;this.uppy.log(`[Dashboard] Dark mode is ${d?"on":"off"}`),this.setDarkModeCapability(d)},this.toggleFileCard=(r,d)=>{const u=this.uppy.getFile(d);r?this.uppy.emit("dashboard:file-edit-start",u):this.uppy.emit("dashboard:file-edit-complete",u),this.setPluginState({fileCardFor:r?d:null,activeOverlayType:r?"FileCard":null})},this.toggleAddFilesPanel=r=>{this.setPluginState({showAddFilesPanel:r,activeOverlayType:r?"AddFiles":null})},this.addFiles=r=>{const d=r.map(u=>({source:this.id,name:u.name,type:u.type,data:u,meta:{relativePath:u.relativePath||u.webkitRelativePath||null}}));try{this.uppy.addFiles(d)}catch(u){this.uppy.log(u)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(r=>{const d=r[0],{width:u,height:c}=d.contentRect;this.setPluginState({containerWidth:u,containerHeight:c,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const r=this.getPluginState(),d=!this.opts.inline&&r.isHidden;!r.areInsidesReadyToBeVisible&&!d&&(this.uppy.log("[Dashboard] resize event didnâ€™t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=r=>{this.el.contains(r.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=r=>{var d;const u=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],c=(d=P(this,ce)[ce])!=null?d:Ge(this.el.querySelectorAll(u)).filter(h=>!h.classList.contains("uppy-Dashboard-close"));for(const h of c)h.tagName==="A"?h.setAttribute("aria-disabled",r):h.disabled=r;r?P(this,ce)[ce]=c:P(this,ce)[ce]=null,this.dashboardIsDisabled=r},this.updateBrowserHistory=()=>{var r;(r=history.state)!=null&&r[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=r=>{var d;this.isModalOpen()&&(!r.state||!r.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(d=r.state)!=null&&d[this.modalName]&&history.back()},this.handleKeyDownInModal=r=>{r.keyCode===Qr&&this.requestCloseModal(),r.keyCode===bi&&Hi(r,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=r=>{this.uppy.iteratePlugins(u=>{u.type==="acquirer"&&(u.handleRootPaste==null||u.handleRootPaste(r))});const d=Ge(r.clipboardData.files);d.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(d))},this.handleInputChange=r=>{r.preventDefault();const d=Ge(r.currentTarget.files||[]);d.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(d))},this.handleDragOver=r=>{r.preventDefault(),r.stopPropagation();const d=()=>{let f=!0;return this.uppy.iteratePlugins(g=>{g.canHandleRootDrop!=null&&g.canHandleRootDrop(r)&&(f=!0)}),f},u=()=>{const{types:f}=r.dataTransfer;return f.some(g=>g==="Files")},c=d(),h=u();if(!c&&!h||this.opts.disabled||this.opts.disableLocalFiles&&(h||!c)||!this.uppy.getState().allowNewUpload){r.dataTransfer.dropEffect="none";return}r.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(r)},this.handleDragLeave=r=>{r.preventDefault(),r.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(r)},this.handleDrop=async r=>{r.preventDefault(),r.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(h=>{h.type==="acquirer"&&(h.handleRootDrop==null||h.handleRootDrop(r))});let d=!1;const u=h=>{this.uppy.log(h,"error"),d||(this.uppy.info(h.message,"error"),d=!0)};this.uppy.log("[Dashboard] Processing dropped files");const c=await nr(r.dataTransfer,{logDropError:u});c.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(c)),this.opts.onDrop(r)},this.handleRequestThumbnail=r=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",r)},this.handleCancelThumbnail=r=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",r)},this.handleKeyDownInInline=r=>{r.keyCode===bi&&cr(r,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=r=>{this.el.contains(document.activeElement)&&this.handlePaste(r)},this.handleComplete=r=>{let{failed:d}=r;this.opts.closeAfterFinish&&!(d!=null&&d.length)&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,te,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;const r=600,d=this.uppy.getFiles();if(d.length===1){const u=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);u==null||u.setOptions({thumbnailWidth:r});const c={...d[0],preview:void 0};u==null||u.requestThumbnail(c).then(()=>{u==null||u.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,ke,{writable:!0,value:r=>{const d=r[0],{metaFields:u}=this.getPluginState(),c=u&&u.length>0,h=this.canEditFile(d);c&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,d.id):h&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(d)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const r=hi(this.opts.trigger);r?r.forEach(d=>d.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",P(this,pe)[pe]),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",P(this,te)[te]),this.uppy.on("file-removed",P(this,te)[te]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",P(this,ke)[ke])},this.removeEvents=()=>{const r=hi(this.opts.trigger);!this.opts.inline&&r&&r.forEach(d=>d.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",P(this,pe)[pe]),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",P(this,te)[te]),this.uppy.off("file-removed",P(this,te)[te]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",P(this,ke)[ke])},this.superFocusOnEachUpdate=()=>{const r=this.el.contains(document.activeElement),d=document.activeElement===document.body||document.activeElement===null,u=this.uppy.getState().info.length===0,c=!this.opts.inline;u&&(c||r||d&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(r,d)=>{this.uppy.setFileMeta(d,r),this.toggleFileCard(!1,d)},Object.defineProperty(this,he,{writable:!0,value:r=>{const d=this.uppy.getPlugin(r.id);return{...r,icon:d.icon||this.opts.defaultPickerIcon,render:d.render}}}),Object.defineProperty(this,Rt,{writable:!0,value:r=>{const d=this.uppy.getPlugin(r.id);return typeof d.isSupported!="function"?!0:d.isSupported()}}),Object.defineProperty(this,Dt,{writable:!0,value:Ut(r=>r.filter(d=>d.type==="acquirer"&&P(this,Rt)[Rt](d)).map(P(this,he)[he]))}),Object.defineProperty(this,Nt,{writable:!0,value:Ut(r=>r.filter(d=>d.type==="progressindicator").map(P(this,he)[he]))}),Object.defineProperty(this,ie,{writable:!0,value:Ut(r=>r.filter(d=>d.type==="editor").map(P(this,he)[he]))}),this.render=r=>{const d=this.getPluginState(),{files:u,capabilities:c,allowNewUpload:h}=r,{newFiles:f,uploadStartedFiles:g,completeFiles:v,erroredFiles:w,inProgressFiles:m,inProgressNotPausedFiles:b,processingFiles:F,isUploadStarted:T,isAllComplete:S,isAllPaused:q}=this.uppy.getObjectOfFilesPerState(),L=P(this,Dt)[Dt](d.targets),O=P(this,Nt)[Nt](d.targets),A=P(this,ie)[ie](d.targets);let M;return this.opts.theme==="auto"?M=c.darkMode?"dark":"light":M=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Vr({state:r,isHidden:d.isHidden,files:u,newFiles:f,uploadStartedFiles:g,completeFiles:v,erroredFiles:w,inProgressFiles:m,inProgressNotPausedFiles:b,processingFiles:F,isUploadStarted:T,isAllComplete:S,isAllPaused:q,totalFileCount:Object.keys(u).length,totalProgress:r.totalProgress,allowNewUpload:h,acquirers:L,theme:M,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:d.activePickerPanel,showFileEditor:d.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:d.isClosing,progressindicators:O,editors:A,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:r.recoveredState,metaFields:d.metaFields,resumableUploads:c.resumableUploads||!1,individualCancellation:c.individualCancellation,isMobileDevice:c.isMobileDevice,fileCardFor:d.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:d.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:d.containerWidth,containerHeight:d.containerHeight,areInsidesReadyToBeVisible:d.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:d.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},Object.defineProperty(this,It,{writable:!0,value:()=>{const{plugins:r}=this.opts;r.forEach(d=>{const u=this.uppy.getPlugin(d);u?u.mount(this,u):this.uppy.log(`[Uppy] Dashboard could not find plugin '${d}', make sure to uppy.use() the plugins you are specifying`,"warning")})}}),Object.defineProperty(this,Bt,{writable:!0,value:()=>{this.uppy.iteratePlugins(P(this,pe)[pe])}}),Object.defineProperty(this,pe,{writable:!0,value:r=>{var d;const u=["acquirer","editor"];r&&!((d=r.opts)!=null&&d.target)&&u.includes(r.type)&&(this.getPluginState().targets.some(h=>r.id===h.id)||r.mount(this,r))}}),this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:r,closeAfterFinish:d}=this.opts;if(r&&d)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:u,allowMultipleUploadBatches:c}=this.uppy.opts;(u||c)&&d&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:h}=this.opts;h&&this.mount(h,this),this.opts.disableStatusBar||this.uppy.use(Mi,{id:P(this,qe)[qe](),target:this,...P(this,$e)[$e]()}),this.opts.disableInformer||this.uppy.use(Li,{id:P(this,xt)[xt](),target:this,...P(this,Mt)[Mt]()}),this.opts.disableThumbnailGenerator||this.uppy.use(_i,{id:P(this,je)[je](),...P(this,ze)[ze]()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const f=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;if(this.uppy.log(`[Dashboard] Dark mode is ${f?"on":"off"}`),this.setDarkModeCapability(f),this.opts.theme==="auto"){var g;(g=this.darkModeMediaQuery)==null||g.addListener(this.handleSystemDarkModeChange)}P(this,It)[It](),P(this,Bt)[Bt](),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const u=this.uppy.getPlugin(`${this.id}:Informer`);u&&this.uppy.removePlugin(u)}if(!this.opts.disableStatusBar){const u=this.uppy.getPlugin(`${this.id}:StatusBar`);u&&this.uppy.removePlugin(u)}if(!this.opts.disableThumbnailGenerator){const u=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);u&&this.uppy.removePlugin(u)}const{plugins:r}=this.opts;if(r.forEach(u=>{const c=this.uppy.getPlugin(u);c&&c.unmount()}),this.opts.theme==="auto"){var d;(d=this.darkModeMediaQuery)==null||d.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=Kr,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(o=(n=this.opts).onRequestCloseModal)!=null||(n.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(e){var i,s;super.setOptions(e),(i=this.uppy.getPlugin(P(this,qe)[qe]()))==null||i.setOptions(P(this,$e)[$e]()),(s=this.uppy.getPlugin(P(this,je)[je]()))==null||s.setOptions(P(this,ze)[ze]())}}function eo(){const{hideUploadButton:t,hideRetryButton:e,hidePauseResumeButton:i,hideCancelButton:s,showProgressDetails:n,hideProgressAfterFinish:o,locale:l,doneButtonHandler:r}=this.opts;return{hideUploadButton:t,hideRetryButton:e,hidePauseResumeButton:i,hideCancelButton:s,showProgressDetails:n,hideAfterFinish:o,locale:l,doneButtonHandler:r}}function to(){const{thumbnailWidth:t,thumbnailHeight:e,thumbnailType:i,waitForThumbnailsBeforeUpload:s}=this.opts;return{thumbnailWidth:t,thumbnailHeight:e,thumbnailType:i,waitForThumbnailsBeforeUpload:s,lazy:!s}}function io(){return{}}function so(){return`${this.id}:StatusBar`}function no(){return`${this.id}:ThumbnailGenerator`}function ro(){return`${this.id}:Informer`}Zr.VERSION=Yr.version;export{Zr as D,pn as T,Wt as U};
